ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"lf_token.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "src-gen/Main/core/lf_token.c"
  20              		.section	.text._lf_free_token_value,"ax",%progbits
  21              		.align	1
  22              		.global	_lf_free_token_value
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	_lf_free_token_value:
  28              	.LVL0:
  29              	.LFB132:
   1:src-gen/Main/core/lf_token.c **** /**
   2:src-gen/Main/core/lf_token.c ****  * @file
   3:src-gen/Main/core/lf_token.c ****  * @author Edward A. Lee (eal@berkeley.edu)
   4:src-gen/Main/core/lf_token.c ****  *
   5:src-gen/Main/core/lf_token.c ****  * @section LICENSE
   6:src-gen/Main/core/lf_token.c ****  * Copyright (c) 2022, The University of California at Berkeley.
   7:src-gen/Main/core/lf_token.c ****  *
   8:src-gen/Main/core/lf_token.c ****  * Redistribution and use in source and binary forms, with or without modification,
   9:src-gen/Main/core/lf_token.c ****  * are permitted provided that the following conditions are met:
  10:src-gen/Main/core/lf_token.c ****  *
  11:src-gen/Main/core/lf_token.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  12:src-gen/Main/core/lf_token.c ****  *    this list of conditions and the following disclaimer.
  13:src-gen/Main/core/lf_token.c ****  *
  14:src-gen/Main/core/lf_token.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  15:src-gen/Main/core/lf_token.c ****  *    this list of conditions and the following disclaimer in the documentation
  16:src-gen/Main/core/lf_token.c ****  *    and/or other materials provided with the distribution.
  17:src-gen/Main/core/lf_token.c ****  *
  18:src-gen/Main/core/lf_token.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
  19:src-gen/Main/core/lf_token.c ****  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  20:src-gen/Main/core/lf_token.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
  21:src-gen/Main/core/lf_token.c ****  * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  22:src-gen/Main/core/lf_token.c ****  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  23:src-gen/Main/core/lf_token.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  24:src-gen/Main/core/lf_token.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  25:src-gen/Main/core/lf_token.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
  26:src-gen/Main/core/lf_token.c ****  * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:src-gen/Main/core/lf_token.c ****  *
  28:src-gen/Main/core/lf_token.c ****  * @section DESCRIPTION
  29:src-gen/Main/core/lf_token.c ****  *
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 2


  30:src-gen/Main/core/lf_token.c ****  * Functions supporting token types.  See lf_token.h for docs.
  31:src-gen/Main/core/lf_token.c ****  */
  32:src-gen/Main/core/lf_token.c **** 
  33:src-gen/Main/core/lf_token.c **** /**
  34:src-gen/Main/core/lf_token.c ****  * Counter used to issue a warning if memory is
  35:src-gen/Main/core/lf_token.c ****  * allocated for message payloads and never freed.
  36:src-gen/Main/core/lf_token.c ****  */
  37:src-gen/Main/core/lf_token.c **** int _lf_count_payload_allocations;
  38:src-gen/Main/core/lf_token.c **** int _lf_count_token_allocations;
  39:src-gen/Main/core/lf_token.c **** 
  40:src-gen/Main/core/lf_token.c **** #include <stdbool.h>
  41:src-gen/Main/core/lf_token.c **** #include <assert.h>
  42:src-gen/Main/core/lf_token.c **** #include <string.h>  // Defines memcpy
  43:src-gen/Main/core/lf_token.c **** #include "lf_token.h"
  44:src-gen/Main/core/lf_token.c **** #include "environment.h"
  45:src-gen/Main/core/lf_token.c **** #include "lf_types.h"
  46:src-gen/Main/core/lf_token.c **** #include "hashset/hashset_itr.h"
  47:src-gen/Main/core/lf_token.c **** #include "util.h"
  48:src-gen/Main/core/lf_token.c **** #include "reactor_common.h" // Enter/exit critical sections
  49:src-gen/Main/core/lf_token.c **** #include "port.h"     // Defines lf_port_base_t.
  50:src-gen/Main/core/lf_token.c **** 
  51:src-gen/Main/core/lf_token.c **** lf_token_t* _lf_tokens_allocated_in_reactions = NULL;
  52:src-gen/Main/core/lf_token.c **** 
  53:src-gen/Main/core/lf_token.c **** ////////////////////////////////////////////////////////////////////
  54:src-gen/Main/core/lf_token.c **** //// Global variables not visible outside this file.
  55:src-gen/Main/core/lf_token.c **** 
  56:src-gen/Main/core/lf_token.c **** /**
  57:src-gen/Main/core/lf_token.c ****  * Tokens always have the same size in memory so they are easily recycled.
  58:src-gen/Main/core/lf_token.c ****  * When a token is freed, it is inserted into this recycling bin.
  59:src-gen/Main/core/lf_token.c ****  */
  60:src-gen/Main/core/lf_token.c **** static hashset_t _lf_token_recycling_bin = NULL;
  61:src-gen/Main/core/lf_token.c **** 
  62:src-gen/Main/core/lf_token.c **** /**
  63:src-gen/Main/core/lf_token.c ****  * To allow a system to recover from burst of activity, the token recycling
  64:src-gen/Main/core/lf_token.c ****  * bin has a limited size. When it becomes full, token are freed using free().
  65:src-gen/Main/core/lf_token.c ****  */
  66:src-gen/Main/core/lf_token.c **** #define _LF_TOKEN_RECYCLING_BIN_SIZE_LIMIT 512
  67:src-gen/Main/core/lf_token.c **** 
  68:src-gen/Main/core/lf_token.c **** /**
  69:src-gen/Main/core/lf_token.c ****  * Set of token templates (trigger_t or port_base_t objects) that
  70:src-gen/Main/core/lf_token.c ****  * have been initialized. This is used to free their tokens at
  71:src-gen/Main/core/lf_token.c ****  * the end of program execution. 
  72:src-gen/Main/core/lf_token.c ****  */
  73:src-gen/Main/core/lf_token.c **** static hashset_t _lf_token_templates = NULL;
  74:src-gen/Main/core/lf_token.c **** 
  75:src-gen/Main/core/lf_token.c **** ////////////////////////////////////////////////////////////////////
  76:src-gen/Main/core/lf_token.c **** //// Functions that users may call.
  77:src-gen/Main/core/lf_token.c **** 
  78:src-gen/Main/core/lf_token.c **** lf_token_t* lf_new_token(void* port_or_action, void* val, size_t len) {
  79:src-gen/Main/core/lf_token.c ****     return _lf_new_token((token_type_t*)port_or_action, val, len);
  80:src-gen/Main/core/lf_token.c **** }
  81:src-gen/Main/core/lf_token.c **** 
  82:src-gen/Main/core/lf_token.c **** lf_token_t* lf_writable_copy(lf_port_base_t* port) {
  83:src-gen/Main/core/lf_token.c ****     assert(port != NULL);
  84:src-gen/Main/core/lf_token.c **** 
  85:src-gen/Main/core/lf_token.c ****     lf_token_t* token = port->tmplt.token;
  86:src-gen/Main/core/lf_token.c ****     if (token == NULL) return NULL;
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 3


  87:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("lf_writable_copy: Requesting writable copy of token %p with reference count %zu
  88:src-gen/Main/core/lf_token.c ****             token, token->ref_count);
  89:src-gen/Main/core/lf_token.c ****     if (port->num_destinations == 1 && token->ref_count == 1) {
  90:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
  91:src-gen/Main/core/lf_token.c ****                 "is only one reader and the reference count is %zu.", token->ref_count);
  92:src-gen/Main/core/lf_token.c ****         return token;
  93:src-gen/Main/core/lf_token.c ****     }
  94:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("lf_writable_copy: Copying value. Reference count is %zu.",
  95:src-gen/Main/core/lf_token.c ****             token->ref_count);
  96:src-gen/Main/core/lf_token.c ****     // Copy the payload.
  97:src-gen/Main/core/lf_token.c ****     void* copy;
  98:src-gen/Main/core/lf_token.c ****     if (port->tmplt.type.copy_constructor == NULL) {
  99:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Copy constructor is NULL. Using default strategy.");
 100:src-gen/Main/core/lf_token.c ****         size_t size = port->tmplt.type.element_size * token->length;
 101:src-gen/Main/core/lf_token.c ****         if (size == 0) {
 102:src-gen/Main/core/lf_token.c ****             return token;
 103:src-gen/Main/core/lf_token.c ****         }
 104:src-gen/Main/core/lf_token.c ****         copy = malloc(size);
 105:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("Allocating memory for writable copy %p.", copy);
 106:src-gen/Main/core/lf_token.c ****         memcpy(copy, token->value, size);
 107:src-gen/Main/core/lf_token.c ****     } else {
 108:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Copy constructor is not NULL. Using copy constructor.");
 109:src-gen/Main/core/lf_token.c ****         if (port->tmplt.type.destructor == NULL) {
 110:src-gen/Main/core/lf_token.c ****             lf_print_warning("lf_writable_copy: Using non-default copy constructor "
 111:src-gen/Main/core/lf_token.c ****                     "without setting destructor. Potential memory leak.");
 112:src-gen/Main/core/lf_token.c ****         }
 113:src-gen/Main/core/lf_token.c ****         copy = port->tmplt.type.copy_constructor(token->value);
 114:src-gen/Main/core/lf_token.c ****     }
 115:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("lf_writable_copy: Allocated memory for payload (token value): %p", copy);
 116:src-gen/Main/core/lf_token.c **** 
 117:src-gen/Main/core/lf_token.c ****     // Count allocations to issue a warning if this is never freed.
 118:src-gen/Main/core/lf_token.c ****     _lf_count_payload_allocations++;
 119:src-gen/Main/core/lf_token.c **** 
 120:src-gen/Main/core/lf_token.c ****     // Create a new, dynamically allocated token.
 121:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_new_token((token_type_t*)port, copy, token->length);
 122:src-gen/Main/core/lf_token.c ****     result->ref_count = 1;
 123:src-gen/Main/core/lf_token.c ****     // Arrange for the token to be released (and possibly freed) at
 124:src-gen/Main/core/lf_token.c ****     // the start of the next time step.
 125:src-gen/Main/core/lf_token.c ****     result->next = _lf_tokens_allocated_in_reactions;
 126:src-gen/Main/core/lf_token.c ****     _lf_tokens_allocated_in_reactions = result;
 127:src-gen/Main/core/lf_token.c **** 
 128:src-gen/Main/core/lf_token.c ****     return result;
 129:src-gen/Main/core/lf_token.c **** }
 130:src-gen/Main/core/lf_token.c **** 
 131:src-gen/Main/core/lf_token.c **** ////////////////////////////////////////////////////////////////////
 132:src-gen/Main/core/lf_token.c **** //// Internal functions.
 133:src-gen/Main/core/lf_token.c **** void _lf_free_token_value(lf_token_t* token) {
  30              		.loc 1 133 46 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
 134:src-gen/Main/core/lf_token.c ****     if (token->value != NULL) {
  34              		.loc 1 134 5 view .LVU1
  35              		.loc 1 134 14 is_stmt 0 view .LVU2
  36 0000 0368     		ldr	r3, [r0]
  37              		.loc 1 134 8 view .LVU3
  38 0002 8BB1     		cbz	r3, .L6
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 4


 133:src-gen/Main/core/lf_token.c ****     if (token->value != NULL) {
  39              		.loc 1 133 46 view .LVU4
  40 0004 10B5     		push	{r4, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 8
  43              		.cfi_offset 4, -8
  44              		.cfi_offset 14, -4
  45 0006 0446     		mov	r4, r0
 135:src-gen/Main/core/lf_token.c ****         // Count frees to issue a warning if this is never freed.
 136:src-gen/Main/core/lf_token.c ****         _lf_count_payload_allocations--;
  46              		.loc 1 136 9 is_stmt 1 view .LVU5
  47              		.loc 1 136 38 is_stmt 0 view .LVU6
  48 0008 084A     		ldr	r2, .L9
  49 000a 1368     		ldr	r3, [r2]
  50 000c 013B     		subs	r3, r3, #1
  51 000e 1360     		str	r3, [r2]
 137:src-gen/Main/core/lf_token.c ****         // Free the value field (the payload).
 138:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_free_token_value: Freeing allocated memory for payload (token value): %
  52              		.loc 1 138 9 is_stmt 1 view .LVU7
  53              		.loc 1 138 9 view .LVU8
  54              		.loc 1 138 9 view .LVU9
 139:src-gen/Main/core/lf_token.c ****             token->value);
 140:src-gen/Main/core/lf_token.c ****         // First check the token's destructor field and invoke it if it is not NULL.
 141:src-gen/Main/core/lf_token.c ****         if (token->type->destructor != NULL) {
  55              		.loc 1 141 9 view .LVU10
  56              		.loc 1 141 18 is_stmt 0 view .LVU11
  57 0010 8368     		ldr	r3, [r0, #8]
  58              		.loc 1 141 24 view .LVU12
  59 0012 5B68     		ldr	r3, [r3, #4]
  60              		.loc 1 141 12 view .LVU13
  61 0014 23B1     		cbz	r3, .L3
 142:src-gen/Main/core/lf_token.c ****             token->type->destructor(token->value);
  62              		.loc 1 142 13 is_stmt 1 view .LVU14
  63 0016 0068     		ldr	r0, [r0]
  64              	.LVL1:
  65              		.loc 1 142 13 is_stmt 0 view .LVU15
  66 0018 9847     		blx	r3
  67              	.LVL2:
  68              	.L4:
 143:src-gen/Main/core/lf_token.c ****         }
 144:src-gen/Main/core/lf_token.c ****         // If Python Target is not enabled and destructor is NULL
 145:src-gen/Main/core/lf_token.c ****         // Token values should be freed
 146:src-gen/Main/core/lf_token.c ****         else {
 147:src-gen/Main/core/lf_token.c **** #ifndef _PYTHON_TARGET_ENABLED
 148:src-gen/Main/core/lf_token.c ****             free(token->value);
 149:src-gen/Main/core/lf_token.c **** #endif
 150:src-gen/Main/core/lf_token.c ****         }
 151:src-gen/Main/core/lf_token.c ****         token->value = NULL;
  69              		.loc 1 151 9 is_stmt 1 view .LVU16
  70              		.loc 1 151 22 is_stmt 0 view .LVU17
  71 001a 0023     		movs	r3, #0
  72 001c 2360     		str	r3, [r4]
 152:src-gen/Main/core/lf_token.c ****     }
 153:src-gen/Main/core/lf_token.c **** }
  73              		.loc 1 153 1 view .LVU18
  74 001e 10BD     		pop	{r4, pc}
  75              	.LVL3:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 5


  76              	.L3:
 148:src-gen/Main/core/lf_token.c **** #endif
  77              		.loc 1 148 13 is_stmt 1 view .LVU19
  78 0020 0068     		ldr	r0, [r0]
  79              	.LVL4:
 148:src-gen/Main/core/lf_token.c **** #endif
  80              		.loc 1 148 13 is_stmt 0 view .LVU20
  81 0022 FFF7FEFF 		bl	free
  82              	.LVL5:
  83 0026 F8E7     		b	.L4
  84              	.LVL6:
  85              	.L6:
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 0
  88              		.cfi_restore 4
  89              		.cfi_restore 14
 148:src-gen/Main/core/lf_token.c **** #endif
  90              		.loc 1 148 13 view .LVU21
  91 0028 7047     		bx	lr
  92              	.L10:
  93 002a 00BF     		.align	2
  94              	.L9:
  95 002c 00000000 		.word	_lf_count_payload_allocations
  96              		.cfi_endproc
  97              	.LFE132:
  99              		.section	.rodata._lf_free_token.str1.4,"aMS",%progbits,1
 100              		.align	2
 101              	.LC0:
 102 0000 436F756C 		.ascii	"Could not enter critical section\000"
 102      64206E6F 
 102      7420656E 
 102      74657220 
 102      63726974 
 103 0021 000000   		.align	2
 104              	.LC1:
 105 0024 4F757420 		.ascii	"Out of memory: failed to setup _lf_token_recycling_"
 105      6F66206D 
 105      656D6F72 
 105      793A2066 
 105      61696C65 
 106 0057 62696E00 		.ascii	"bin\000"
 107 005b 00       		.align	2
 108              	.LC2:
 109 005c 50757474 		.ascii	"Putting token %p on the recycling bin, but it is al"
 109      696E6720 
 109      746F6B65 
 109      6E202570 
 109      206F6E20 
 110 008f 72656164 		.ascii	"ready there!\000"
 110      79207468 
 110      65726521 
 110      00
 111              		.align	2
 112              	.LC3:
 113 009c 436F756C 		.ascii	"Could not leave critical section\000"
 113      64206E6F 
 113      74206C65 
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 6


 113      61766520 
 113      63726974 
 114              		.section	.text._lf_free_token,"ax",%progbits
 115              		.align	1
 116              		.global	_lf_free_token
 117              		.syntax unified
 118              		.thumb
 119              		.thumb_func
 121              	_lf_free_token:
 122              	.LVL7:
 123              	.LFB133:
 154:src-gen/Main/core/lf_token.c **** 
 155:src-gen/Main/core/lf_token.c **** token_freed _lf_free_token(lf_token_t* token) {
 124              		.loc 1 155 47 is_stmt 1 view -0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 156:src-gen/Main/core/lf_token.c ****     token_freed result = NOT_FREED;
 128              		.loc 1 156 5 view .LVU23
 157:src-gen/Main/core/lf_token.c ****     if (token == NULL) return result;
 129              		.loc 1 157 5 view .LVU24
 130              		.loc 1 157 8 is_stmt 0 view .LVU25
 131 0000 0028     		cmp	r0, #0
 132 0002 41D0     		beq	.L19
 155:src-gen/Main/core/lf_token.c ****     token_freed result = NOT_FREED;
 133              		.loc 1 155 47 view .LVU26
 134 0004 10B5     		push	{r4, lr}
 135              	.LCFI2:
 136              		.cfi_def_cfa_offset 8
 137              		.cfi_offset 4, -8
 138              		.cfi_offset 14, -4
 139 0006 0446     		mov	r4, r0
 158:src-gen/Main/core/lf_token.c ****     if (token->ref_count > 0) return result;
 140              		.loc 1 158 5 is_stmt 1 view .LVU27
 141              		.loc 1 158 14 is_stmt 0 view .LVU28
 142 0008 C368     		ldr	r3, [r0, #12]
 143              		.loc 1 158 8 view .LVU29
 144 000a 0BB1     		cbz	r3, .L22
 145              	.LVL8:
 146              	.L12:
 159:src-gen/Main/core/lf_token.c ****     _lf_free_token_value(token);
 160:src-gen/Main/core/lf_token.c **** 
 161:src-gen/Main/core/lf_token.c ****     // Tokens that are created at the start of execution and associated with
 162:src-gen/Main/core/lf_token.c ****     // output ports or actions persist until they are overwritten.
 163:src-gen/Main/core/lf_token.c ****     // Need to acquire a mutex to access the recycle bin.
 164:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 165:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 166:src-gen/Main/core/lf_token.c ****     }
 167:src-gen/Main/core/lf_token.c ****     if (_lf_token_recycling_bin == NULL) {
 168:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = hashset_create(4); // Initial size is 16.
 169:src-gen/Main/core/lf_token.c ****         if (_lf_token_recycling_bin == NULL) {
 170:src-gen/Main/core/lf_token.c ****             lf_critical_section_exit(GLOBAL_ENVIRONMENT);
 171:src-gen/Main/core/lf_token.c ****             lf_print_error_and_exit("Out of memory: failed to setup _lf_token_recycling_bin");
 172:src-gen/Main/core/lf_token.c ****         }
 173:src-gen/Main/core/lf_token.c ****     }
 174:src-gen/Main/core/lf_token.c ****     if (hashset_num_items(_lf_token_recycling_bin) < _LF_TOKEN_RECYCLING_BIN_SIZE_LIMIT) {
 175:src-gen/Main/core/lf_token.c ****         // Recycle instead of freeing.
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 7


 176:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_free_token: Putting token on the recycling bin: %p", token);
 177:src-gen/Main/core/lf_token.c ****         if (!hashset_add(_lf_token_recycling_bin, token)) {
 178:src-gen/Main/core/lf_token.c ****             lf_print_warning("Putting token %p on the recycling bin, but it is already there!", tok
 179:src-gen/Main/core/lf_token.c ****         }
 180:src-gen/Main/core/lf_token.c ****     } else {
 181:src-gen/Main/core/lf_token.c ****         // Recycling bin is full.
 182:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_free_token: Freeing allocated memory for token: %p", token);
 183:src-gen/Main/core/lf_token.c ****         free(token);
 184:src-gen/Main/core/lf_token.c ****     }
 185:src-gen/Main/core/lf_token.c ****     if(lf_critical_section_exit(GLOBAL_ENVIRONMENT) != 0) {
 186:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 187:src-gen/Main/core/lf_token.c ****     }
 188:src-gen/Main/core/lf_token.c ****     _lf_count_token_allocations--;
 189:src-gen/Main/core/lf_token.c ****     result &= TOKEN_FREED;
 190:src-gen/Main/core/lf_token.c **** 
 191:src-gen/Main/core/lf_token.c ****     return result;
 192:src-gen/Main/core/lf_token.c **** }
 147              		.loc 1 192 1 view .LVU30
 148 000c 0020     		movs	r0, #0
 149 000e 10BD     		pop	{r4, pc}
 150              	.LVL9:
 151              	.L22:
 159:src-gen/Main/core/lf_token.c ****     _lf_free_token_value(token);
 152              		.loc 1 159 5 is_stmt 1 view .LVU31
 153 0010 FFF7FEFF 		bl	_lf_free_token_value
 154              	.LVL10:
 164:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 155              		.loc 1 164 5 view .LVU32
 164:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 156              		.loc 1 164 9 is_stmt 0 view .LVU33
 157 0014 0020     		movs	r0, #0
 158 0016 FFF7FEFF 		bl	lf_critical_section_enter
 159              	.LVL11:
 164:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 160              		.loc 1 164 8 view .LVU34
 161 001a A0B9     		cbnz	r0, .L23
 162              	.L13:
 167:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = hashset_create(4); // Initial size is 16.
 163              		.loc 1 167 5 is_stmt 1 view .LVU35
 167:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = hashset_create(4); // Initial size is 16.
 164              		.loc 1 167 33 is_stmt 0 view .LVU36
 165 001c 1B4B     		ldr	r3, .L26
 166 001e 1B68     		ldr	r3, [r3]
 167:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = hashset_create(4); // Initial size is 16.
 167              		.loc 1 167 8 view .LVU37
 168 0020 ABB1     		cbz	r3, .L24
 169              	.L14:
 174:src-gen/Main/core/lf_token.c ****         // Recycle instead of freeing.
 170              		.loc 1 174 5 is_stmt 1 view .LVU38
 174:src-gen/Main/core/lf_token.c ****         // Recycle instead of freeing.
 171              		.loc 1 174 9 is_stmt 0 view .LVU39
 172 0022 1A4B     		ldr	r3, .L26
 173 0024 1868     		ldr	r0, [r3]
 174 0026 FFF7FEFF 		bl	hashset_num_items
 175              	.LVL12:
 174:src-gen/Main/core/lf_token.c ****         // Recycle instead of freeing.
 176              		.loc 1 174 8 view .LVU40
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 8


 177 002a B0F5007F 		cmp	r0, #512
 178 002e 1BD2     		bcs	.L15
 176:src-gen/Main/core/lf_token.c ****         if (!hashset_add(_lf_token_recycling_bin, token)) {
 179              		.loc 1 176 9 is_stmt 1 discriminator 3 view .LVU41
 176:src-gen/Main/core/lf_token.c ****         if (!hashset_add(_lf_token_recycling_bin, token)) {
 180              		.loc 1 176 9 discriminator 3 view .LVU42
 176:src-gen/Main/core/lf_token.c ****         if (!hashset_add(_lf_token_recycling_bin, token)) {
 181              		.loc 1 176 9 discriminator 3 view .LVU43
 177:src-gen/Main/core/lf_token.c ****             lf_print_warning("Putting token %p on the recycling bin, but it is already there!", tok
 182              		.loc 1 177 9 discriminator 3 view .LVU44
 177:src-gen/Main/core/lf_token.c ****             lf_print_warning("Putting token %p on the recycling bin, but it is already there!", tok
 183              		.loc 1 177 14 is_stmt 0 discriminator 3 view .LVU45
 184 0030 2146     		mov	r1, r4
 185 0032 164B     		ldr	r3, .L26
 186 0034 1868     		ldr	r0, [r3]
 187 0036 FFF7FEFF 		bl	hashset_add
 188              	.LVL13:
 177:src-gen/Main/core/lf_token.c ****             lf_print_warning("Putting token %p on the recycling bin, but it is already there!", tok
 189              		.loc 1 177 12 discriminator 3 view .LVU46
 190 003a C0B9     		cbnz	r0, .L16
 178:src-gen/Main/core/lf_token.c ****         }
 191              		.loc 1 178 13 is_stmt 1 view .LVU47
 192 003c 2146     		mov	r1, r4
 193 003e 1448     		ldr	r0, .L26+4
 194 0040 FFF7FEFF 		bl	lf_print_warning
 195              	.LVL14:
 196 0044 13E0     		b	.L16
 197              	.L23:
 165:src-gen/Main/core/lf_token.c ****     }
 198              		.loc 1 165 9 view .LVU48
 199 0046 1348     		ldr	r0, .L26+8
 200 0048 FFF7FEFF 		bl	lf_print_error_and_exit
 201              	.LVL15:
 202 004c E6E7     		b	.L13
 203              	.L24:
 168:src-gen/Main/core/lf_token.c ****         if (_lf_token_recycling_bin == NULL) {
 204              		.loc 1 168 9 view .LVU49
 168:src-gen/Main/core/lf_token.c ****         if (_lf_token_recycling_bin == NULL) {
 205              		.loc 1 168 35 is_stmt 0 view .LVU50
 206 004e 0420     		movs	r0, #4
 207 0050 FFF7FEFF 		bl	hashset_create
 208              	.LVL16:
 168:src-gen/Main/core/lf_token.c ****         if (_lf_token_recycling_bin == NULL) {
 209              		.loc 1 168 33 view .LVU51
 210 0054 0D4B     		ldr	r3, .L26
 211 0056 1860     		str	r0, [r3]
 169:src-gen/Main/core/lf_token.c ****             lf_critical_section_exit(GLOBAL_ENVIRONMENT);
 212              		.loc 1 169 9 is_stmt 1 view .LVU52
 169:src-gen/Main/core/lf_token.c ****             lf_critical_section_exit(GLOBAL_ENVIRONMENT);
 213              		.loc 1 169 12 is_stmt 0 view .LVU53
 214 0058 0028     		cmp	r0, #0
 215 005a E2D1     		bne	.L14
 170:src-gen/Main/core/lf_token.c ****             lf_print_error_and_exit("Out of memory: failed to setup _lf_token_recycling_bin");
 216              		.loc 1 170 13 is_stmt 1 view .LVU54
 217 005c FFF7FEFF 		bl	lf_critical_section_exit
 218              	.LVL17:
 171:src-gen/Main/core/lf_token.c ****         }
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 9


 219              		.loc 1 171 13 view .LVU55
 220 0060 0D48     		ldr	r0, .L26+12
 221 0062 FFF7FEFF 		bl	lf_print_error_and_exit
 222              	.LVL18:
 223 0066 DCE7     		b	.L14
 224              	.L15:
 182:src-gen/Main/core/lf_token.c ****         free(token);
 225              		.loc 1 182 9 discriminator 3 view .LVU56
 182:src-gen/Main/core/lf_token.c ****         free(token);
 226              		.loc 1 182 9 discriminator 3 view .LVU57
 182:src-gen/Main/core/lf_token.c ****         free(token);
 227              		.loc 1 182 9 discriminator 3 view .LVU58
 183:src-gen/Main/core/lf_token.c ****     }
 228              		.loc 1 183 9 discriminator 3 view .LVU59
 229 0068 2046     		mov	r0, r4
 230 006a FFF7FEFF 		bl	free
 231              	.LVL19:
 232              	.L16:
 185:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 233              		.loc 1 185 5 view .LVU60
 185:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 234              		.loc 1 185 8 is_stmt 0 view .LVU61
 235 006e 0020     		movs	r0, #0
 236 0070 FFF7FEFF 		bl	lf_critical_section_exit
 237              	.LVL20:
 185:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 238              		.loc 1 185 7 view .LVU62
 239 0074 20B9     		cbnz	r0, .L25
 240              	.L17:
 188:src-gen/Main/core/lf_token.c ****     result &= TOKEN_FREED;
 241              		.loc 1 188 5 is_stmt 1 view .LVU63
 188:src-gen/Main/core/lf_token.c ****     result &= TOKEN_FREED;
 242              		.loc 1 188 32 is_stmt 0 view .LVU64
 243 0076 094A     		ldr	r2, .L26+16
 244 0078 1368     		ldr	r3, [r2]
 245 007a 013B     		subs	r3, r3, #1
 246 007c 1360     		str	r3, [r2]
 189:src-gen/Main/core/lf_token.c **** 
 247              		.loc 1 189 5 is_stmt 1 view .LVU65
 191:src-gen/Main/core/lf_token.c **** }
 248              		.loc 1 191 5 view .LVU66
 191:src-gen/Main/core/lf_token.c **** }
 249              		.loc 1 191 12 is_stmt 0 view .LVU67
 250 007e C5E7     		b	.L12
 251              	.L25:
 186:src-gen/Main/core/lf_token.c ****     }
 252              		.loc 1 186 9 is_stmt 1 view .LVU68
 253 0080 0748     		ldr	r0, .L26+20
 254 0082 FFF7FEFF 		bl	lf_print_error_and_exit
 255              	.LVL21:
 256 0086 F6E7     		b	.L17
 257              	.LVL22:
 258              	.L19:
 259              	.LCFI3:
 260              		.cfi_def_cfa_offset 0
 261              		.cfi_restore 4
 262              		.cfi_restore 14
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 10


 263              		.loc 1 192 1 is_stmt 0 view .LVU69
 264 0088 0020     		movs	r0, #0
 265              	.LVL23:
 266              		.loc 1 192 1 view .LVU70
 267 008a 7047     		bx	lr
 268              	.L27:
 269              		.align	2
 270              	.L26:
 271 008c 00000000 		.word	_lf_token_recycling_bin
 272 0090 5C000000 		.word	.LC2
 273 0094 00000000 		.word	.LC0
 274 0098 24000000 		.word	.LC1
 275 009c 00000000 		.word	_lf_count_token_allocations
 276 00a0 9C000000 		.word	.LC3
 277              		.cfi_endproc
 278              	.LFE133:
 280              		.section	.text._lf_new_token,"ax",%progbits
 281              		.align	1
 282              		.global	_lf_new_token
 283              		.syntax unified
 284              		.thumb
 285              		.thumb_func
 287              	_lf_new_token:
 288              	.LVL24:
 289              	.LFB134:
 193:src-gen/Main/core/lf_token.c **** 
 194:src-gen/Main/core/lf_token.c **** lf_token_t* _lf_new_token(token_type_t* type, void* value, size_t length) {
 290              		.loc 1 194 75 is_stmt 1 view -0
 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 0
 293              		@ frame_needed = 0, uses_anonymous_args = 0
 294              		.loc 1 194 75 is_stmt 0 view .LVU72
 295 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 296              	.LCFI4:
 297              		.cfi_def_cfa_offset 24
 298              		.cfi_offset 4, -24
 299              		.cfi_offset 5, -20
 300              		.cfi_offset 6, -16
 301              		.cfi_offset 7, -12
 302              		.cfi_offset 8, -8
 303              		.cfi_offset 14, -4
 304 0004 0746     		mov	r7, r0
 305 0006 0D46     		mov	r5, r1
 306 0008 1646     		mov	r6, r2
 195:src-gen/Main/core/lf_token.c ****     lf_token_t* result = NULL;
 307              		.loc 1 195 5 is_stmt 1 view .LVU73
 308              	.LVL25:
 196:src-gen/Main/core/lf_token.c ****     // Check the recycling bin.
 197:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 309              		.loc 1 197 5 view .LVU74
 310              		.loc 1 197 9 is_stmt 0 view .LVU75
 311 000a 0020     		movs	r0, #0
 312              	.LVL26:
 313              		.loc 1 197 9 view .LVU76
 314 000c FFF7FEFF 		bl	lf_critical_section_enter
 315              	.LVL27:
 316              		.loc 1 197 8 view .LVU77
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 11


 317 0010 D8B9     		cbnz	r0, .L36
 318              	.L29:
 198:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 199:src-gen/Main/core/lf_token.c ****     }
 200:src-gen/Main/core/lf_token.c ****     if (_lf_token_recycling_bin != NULL) {
 319              		.loc 1 200 5 is_stmt 1 view .LVU78
 320              		.loc 1 200 33 is_stmt 0 view .LVU79
 321 0012 1A4B     		ldr	r3, .L40
 322 0014 1C68     		ldr	r4, [r3]
 323              		.loc 1 200 8 view .LVU80
 324 0016 5CB1     		cbz	r4, .L30
 325              	.LBB2:
 201:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_recycling_bin);
 326              		.loc 1 201 9 is_stmt 1 view .LVU81
 327              		.loc 1 201 34 is_stmt 0 view .LVU82
 328 0018 2046     		mov	r0, r4
 329 001a FFF7FEFF 		bl	hashset_iterator
 330              	.LVL28:
 331 001e 8046     		mov	r8, r0
 332              	.LVL29:
 202:src-gen/Main/core/lf_token.c ****         if (hashset_iterator_next(iterator) >= 0) {
 333              		.loc 1 202 9 is_stmt 1 view .LVU83
 334              		.loc 1 202 13 is_stmt 0 view .LVU84
 335 0020 FFF7FEFF 		bl	hashset_iterator_next
 336              	.LVL30:
 337              		.loc 1 202 12 view .LVU85
 338 0024 0028     		cmp	r0, #0
 339 0026 14DA     		bge	.L37
 340              	.LBE2:
 195:src-gen/Main/core/lf_token.c ****     // Check the recycling bin.
 341              		.loc 1 195 17 view .LVU86
 342 0028 0024     		movs	r4, #0
 343              	.LVL31:
 344              	.L31:
 345              	.LBB3:
 203:src-gen/Main/core/lf_token.c ****             result = hashset_iterator_value(iterator);
 204:src-gen/Main/core/lf_token.c ****             hashset_remove(_lf_token_recycling_bin, result);
 205:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_new_token: Retrieved token from the recycling bin: %p", result);
 346              		.loc 1 205 13 is_stmt 1 discriminator 3 view .LVU87
 206:src-gen/Main/core/lf_token.c ****         }
 207:src-gen/Main/core/lf_token.c ****         free(iterator);
 347              		.loc 1 207 9 discriminator 3 view .LVU88
 348 002a 4046     		mov	r0, r8
 349 002c FFF7FEFF 		bl	free
 350              	.LVL32:
 351              	.L30:
 352              		.loc 1 207 9 is_stmt 0 discriminator 3 view .LVU89
 353              	.LBE3:
 208:src-gen/Main/core/lf_token.c ****     }
 209:src-gen/Main/core/lf_token.c ****     if(lf_critical_section_exit(GLOBAL_ENVIRONMENT) != 0) {
 354              		.loc 1 209 5 is_stmt 1 view .LVU90
 355              		.loc 1 209 8 is_stmt 0 view .LVU91
 356 0030 0020     		movs	r0, #0
 357 0032 FFF7FEFF 		bl	lf_critical_section_exit
 358              	.LVL33:
 359              		.loc 1 209 7 view .LVU92
 360 0036 B0B9     		cbnz	r0, .L38
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 12


 361              	.L32:
 210:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 211:src-gen/Main/core/lf_token.c ****     }
 212:src-gen/Main/core/lf_token.c ****     if (result == NULL) {
 362              		.loc 1 212 5 is_stmt 1 view .LVU93
 363              		.loc 1 212 8 is_stmt 0 view .LVU94
 364 0038 CCB1     		cbz	r4, .L39
 365              	.L33:
 213:src-gen/Main/core/lf_token.c ****         // Nothing found on the recycle bin.
 214:src-gen/Main/core/lf_token.c ****         result = (lf_token_t*)calloc(1, sizeof(lf_token_t));
 215:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_new_token: Allocated memory for token: %p", result);
 366              		.loc 1 215 9 is_stmt 1 discriminator 3 view .LVU95
 216:src-gen/Main/core/lf_token.c ****     }
 217:src-gen/Main/core/lf_token.c ****     result->type = type;
 367              		.loc 1 217 5 discriminator 3 view .LVU96
 368              		.loc 1 217 18 is_stmt 0 discriminator 3 view .LVU97
 369 003a A760     		str	r7, [r4, #8]
 218:src-gen/Main/core/lf_token.c ****     result->length = length;
 370              		.loc 1 218 5 is_stmt 1 discriminator 3 view .LVU98
 371              		.loc 1 218 20 is_stmt 0 discriminator 3 view .LVU99
 372 003c 6660     		str	r6, [r4, #4]
 219:src-gen/Main/core/lf_token.c ****     result->value = value;
 373              		.loc 1 219 5 is_stmt 1 discriminator 3 view .LVU100
 374              		.loc 1 219 19 is_stmt 0 discriminator 3 view .LVU101
 375 003e 2560     		str	r5, [r4]
 220:src-gen/Main/core/lf_token.c ****     result->ref_count = 0;
 376              		.loc 1 220 5 is_stmt 1 discriminator 3 view .LVU102
 377              		.loc 1 220 23 is_stmt 0 discriminator 3 view .LVU103
 378 0040 0023     		movs	r3, #0
 379 0042 E360     		str	r3, [r4, #12]
 221:src-gen/Main/core/lf_token.c ****     return result;
 380              		.loc 1 221 5 is_stmt 1 discriminator 3 view .LVU104
 222:src-gen/Main/core/lf_token.c **** }
 381              		.loc 1 222 1 is_stmt 0 discriminator 3 view .LVU105
 382 0044 2046     		mov	r0, r4
 383 0046 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 384              	.LVL34:
 385              	.L36:
 198:src-gen/Main/core/lf_token.c ****     }
 386              		.loc 1 198 9 is_stmt 1 view .LVU106
 387 004a 0D48     		ldr	r0, .L40+4
 388 004c FFF7FEFF 		bl	lf_print_error_and_exit
 389              	.LVL35:
 390 0050 DFE7     		b	.L29
 391              	.LVL36:
 392              	.L37:
 393              	.LBB4:
 203:src-gen/Main/core/lf_token.c ****             hashset_remove(_lf_token_recycling_bin, result);
 394              		.loc 1 203 13 view .LVU107
 203:src-gen/Main/core/lf_token.c ****             hashset_remove(_lf_token_recycling_bin, result);
 395              		.loc 1 203 22 is_stmt 0 view .LVU108
 396 0052 4046     		mov	r0, r8
 397 0054 FFF7FEFF 		bl	hashset_iterator_value
 398              	.LVL37:
 399 0058 0446     		mov	r4, r0
 400              	.LVL38:
 204:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_new_token: Retrieved token from the recycling bin: %p", result);
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 13


 401              		.loc 1 204 13 is_stmt 1 view .LVU109
 402 005a 0146     		mov	r1, r0
 403 005c 074B     		ldr	r3, .L40
 404 005e 1868     		ldr	r0, [r3]
 405              	.LVL39:
 204:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_new_token: Retrieved token from the recycling bin: %p", result);
 406              		.loc 1 204 13 is_stmt 0 view .LVU110
 407 0060 FFF7FEFF 		bl	hashset_remove
 408              	.LVL40:
 205:src-gen/Main/core/lf_token.c ****         }
 409              		.loc 1 205 13 is_stmt 1 view .LVU111
 205:src-gen/Main/core/lf_token.c ****         }
 410              		.loc 1 205 13 view .LVU112
 411 0064 E1E7     		b	.L31
 412              	.LVL41:
 413              	.L38:
 205:src-gen/Main/core/lf_token.c ****         }
 414              		.loc 1 205 13 is_stmt 0 view .LVU113
 415              	.LBE4:
 210:src-gen/Main/core/lf_token.c ****     }
 416              		.loc 1 210 9 is_stmt 1 view .LVU114
 417 0066 0748     		ldr	r0, .L40+8
 418 0068 FFF7FEFF 		bl	lf_print_error_and_exit
 419              	.LVL42:
 420 006c E4E7     		b	.L32
 421              	.L39:
 214:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_new_token: Allocated memory for token: %p", result);
 422              		.loc 1 214 9 view .LVU115
 214:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("_lf_new_token: Allocated memory for token: %p", result);
 423              		.loc 1 214 31 is_stmt 0 view .LVU116
 424 006e 1421     		movs	r1, #20
 425 0070 0120     		movs	r0, #1
 426 0072 FFF7FEFF 		bl	calloc
 427              	.LVL43:
 428 0076 0446     		mov	r4, r0
 429              	.LVL44:
 215:src-gen/Main/core/lf_token.c ****     }
 430              		.loc 1 215 9 is_stmt 1 view .LVU117
 215:src-gen/Main/core/lf_token.c ****     }
 431              		.loc 1 215 9 view .LVU118
 432 0078 DFE7     		b	.L33
 433              	.L41:
 434 007a 00BF     		.align	2
 435              	.L40:
 436 007c 00000000 		.word	_lf_token_recycling_bin
 437 0080 00000000 		.word	.LC0
 438 0084 9C000000 		.word	.LC3
 439              		.cfi_endproc
 440              	.LFE134:
 442              		.section	.text.lf_new_token,"ax",%progbits
 443              		.align	1
 444              		.global	lf_new_token
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 449              	lf_new_token:
 450              	.LVL45:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 14


 451              	.LFB130:
  78:src-gen/Main/core/lf_token.c ****     return _lf_new_token((token_type_t*)port_or_action, val, len);
 452              		.loc 1 78 71 view -0
 453              		.cfi_startproc
 454              		@ args = 0, pretend = 0, frame = 0
 455              		@ frame_needed = 0, uses_anonymous_args = 0
  78:src-gen/Main/core/lf_token.c ****     return _lf_new_token((token_type_t*)port_or_action, val, len);
 456              		.loc 1 78 71 is_stmt 0 view .LVU120
 457 0000 08B5     		push	{r3, lr}
 458              	.LCFI5:
 459              		.cfi_def_cfa_offset 8
 460              		.cfi_offset 3, -8
 461              		.cfi_offset 14, -4
  79:src-gen/Main/core/lf_token.c **** }
 462              		.loc 1 79 5 is_stmt 1 view .LVU121
  79:src-gen/Main/core/lf_token.c **** }
 463              		.loc 1 79 12 is_stmt 0 view .LVU122
 464 0002 FFF7FEFF 		bl	_lf_new_token
 465              	.LVL46:
  80:src-gen/Main/core/lf_token.c **** 
 466              		.loc 1 80 1 view .LVU123
 467 0006 08BD     		pop	{r3, pc}
 468              		.cfi_endproc
 469              	.LFE130:
 471              		.section	.rodata.lf_writable_copy.str1.4,"aMS",%progbits,1
 472              		.align	2
 473              	.LC4:
 474 0000 706F7274 		.ascii	"port != NULL\000"
 474      20213D20 
 474      4E554C4C 
 474      00
 475 000d 000000   		.align	2
 476              	.LC5:
 477 0010 7372632D 		.ascii	"src-gen/Main/core/lf_token.c\000"
 477      67656E2F 
 477      4D61696E 
 477      2F636F72 
 477      652F6C66 
 478 002d 000000   		.align	2
 479              	.LC6:
 480 0030 6C665F77 		.ascii	"lf_writable_copy: Using non-default copy constructo"
 480      72697461 
 480      626C655F 
 480      636F7079 
 480      3A205573 
 481 0063 72207769 		.ascii	"r without setting destructor. Potential memory leak"
 481      74686F75 
 481      74207365 
 481      7474696E 
 481      67206465 
 482 0096 2E00     		.ascii	".\000"
 483              		.section	.text.lf_writable_copy,"ax",%progbits
 484              		.align	1
 485              		.global	lf_writable_copy
 486              		.syntax unified
 487              		.thumb
 488              		.thumb_func
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 15


 490              	lf_writable_copy:
 491              	.LVL47:
 492              	.LFB131:
  82:src-gen/Main/core/lf_token.c ****     assert(port != NULL);
 493              		.loc 1 82 52 is_stmt 1 view -0
 494              		.cfi_startproc
 495              		@ args = 0, pretend = 0, frame = 0
 496              		@ frame_needed = 0, uses_anonymous_args = 0
  82:src-gen/Main/core/lf_token.c ****     assert(port != NULL);
 497              		.loc 1 82 52 is_stmt 0 view .LVU125
 498 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 499              	.LCFI6:
 500              		.cfi_def_cfa_offset 24
 501              		.cfi_offset 3, -24
 502              		.cfi_offset 4, -20
 503              		.cfi_offset 5, -16
 504              		.cfi_offset 6, -12
 505              		.cfi_offset 7, -8
 506              		.cfi_offset 14, -4
  83:src-gen/Main/core/lf_token.c **** 
 507              		.loc 1 83 5 is_stmt 1 view .LVU126
 508 0002 00B3     		cbz	r0, .L52
 509 0004 0546     		mov	r5, r0
  85:src-gen/Main/core/lf_token.c ****     if (token == NULL) return NULL;
 510              		.loc 1 85 5 view .LVU127
  85:src-gen/Main/core/lf_token.c ****     if (token == NULL) return NULL;
 511              		.loc 1 85 17 is_stmt 0 view .LVU128
 512 0006 C468     		ldr	r4, [r0, #12]
 513              	.LVL48:
  86:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("lf_writable_copy: Requesting writable copy of token %p with reference count %zu
 514              		.loc 1 86 5 is_stmt 1 view .LVU129
  86:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("lf_writable_copy: Requesting writable copy of token %p with reference count %zu
 515              		.loc 1 86 8 is_stmt 0 view .LVU130
 516 0008 DCB1     		cbz	r4, .L44
  87:src-gen/Main/core/lf_token.c ****             token, token->ref_count);
 517              		.loc 1 87 5 is_stmt 1 discriminator 3 view .LVU131
  87:src-gen/Main/core/lf_token.c ****             token, token->ref_count);
 518              		.loc 1 87 5 discriminator 3 view .LVU132
  87:src-gen/Main/core/lf_token.c ****             token, token->ref_count);
 519              		.loc 1 87 5 discriminator 3 view .LVU133
  89:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
 520              		.loc 1 89 5 discriminator 3 view .LVU134
  89:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
 521              		.loc 1 89 13 is_stmt 0 discriminator 3 view .LVU135
 522 000a 036A     		ldr	r3, [r0, #32]
  89:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
 523              		.loc 1 89 8 discriminator 3 view .LVU136
 524 000c 012B     		cmp	r3, #1
 525 000e 20D0     		beq	.L53
 526              	.L47:
  94:src-gen/Main/core/lf_token.c ****             token->ref_count);
 527              		.loc 1 94 5 is_stmt 1 discriminator 3 view .LVU137
  94:src-gen/Main/core/lf_token.c ****             token->ref_count);
 528              		.loc 1 94 5 discriminator 3 view .LVU138
  94:src-gen/Main/core/lf_token.c ****             token->ref_count);
 529              		.loc 1 94 5 discriminator 3 view .LVU139
  97:src-gen/Main/core/lf_token.c ****     if (port->tmplt.type.copy_constructor == NULL) {
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 16


 530              		.loc 1 97 5 discriminator 3 view .LVU140
  98:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Copy constructor is NULL. Using default strategy.");
 531              		.loc 1 98 5 discriminator 3 view .LVU141
  98:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Copy constructor is NULL. Using default strategy.");
 532              		.loc 1 98 25 is_stmt 0 discriminator 3 view .LVU142
 533 0010 AB68     		ldr	r3, [r5, #8]
  98:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Copy constructor is NULL. Using default strategy.");
 534              		.loc 1 98 8 discriminator 3 view .LVU143
 535 0012 13B3     		cbz	r3, .L54
 108:src-gen/Main/core/lf_token.c ****         if (port->tmplt.type.destructor == NULL) {
 536              		.loc 1 108 9 is_stmt 1 discriminator 3 view .LVU144
 108:src-gen/Main/core/lf_token.c ****         if (port->tmplt.type.destructor == NULL) {
 537              		.loc 1 108 9 discriminator 3 view .LVU145
 108:src-gen/Main/core/lf_token.c ****         if (port->tmplt.type.destructor == NULL) {
 538              		.loc 1 108 9 discriminator 3 view .LVU146
 109:src-gen/Main/core/lf_token.c ****             lf_print_warning("lf_writable_copy: Using non-default copy constructor "
 539              		.loc 1 109 9 discriminator 3 view .LVU147
 109:src-gen/Main/core/lf_token.c ****             lf_print_warning("lf_writable_copy: Using non-default copy constructor "
 540              		.loc 1 109 29 is_stmt 0 discriminator 3 view .LVU148
 541 0014 6B68     		ldr	r3, [r5, #4]
 109:src-gen/Main/core/lf_token.c ****             lf_print_warning("lf_writable_copy: Using non-default copy constructor "
 542              		.loc 1 109 12 discriminator 3 view .LVU149
 543 0016 002B     		cmp	r3, #0
 544 0018 2ED0     		beq	.L55
 545              	.LVL49:
 546              	.L50:
 113:src-gen/Main/core/lf_token.c ****     }
 547              		.loc 1 113 9 is_stmt 1 view .LVU150
 113:src-gen/Main/core/lf_token.c ****     }
 548              		.loc 1 113 32 is_stmt 0 view .LVU151
 549 001a AB68     		ldr	r3, [r5, #8]
 113:src-gen/Main/core/lf_token.c ****     }
 550              		.loc 1 113 16 view .LVU152
 551 001c 2068     		ldr	r0, [r4]
 552 001e 9847     		blx	r3
 553              	.LVL50:
 554 0020 0646     		mov	r6, r0
 555              	.LVL51:
 556              	.L49:
 115:src-gen/Main/core/lf_token.c **** 
 557              		.loc 1 115 5 is_stmt 1 discriminator 3 view .LVU153
 115:src-gen/Main/core/lf_token.c **** 
 558              		.loc 1 115 5 discriminator 3 view .LVU154
 115:src-gen/Main/core/lf_token.c **** 
 559              		.loc 1 115 5 discriminator 3 view .LVU155
 118:src-gen/Main/core/lf_token.c **** 
 560              		.loc 1 118 5 discriminator 3 view .LVU156
 118:src-gen/Main/core/lf_token.c **** 
 561              		.loc 1 118 34 is_stmt 0 discriminator 3 view .LVU157
 562 0022 174A     		ldr	r2, .L56
 563 0024 1368     		ldr	r3, [r2]
 564 0026 0133     		adds	r3, r3, #1
 565 0028 1360     		str	r3, [r2]
 121:src-gen/Main/core/lf_token.c ****     result->ref_count = 1;
 566              		.loc 1 121 5 is_stmt 1 discriminator 3 view .LVU158
 121:src-gen/Main/core/lf_token.c ****     result->ref_count = 1;
 567              		.loc 1 121 26 is_stmt 0 discriminator 3 view .LVU159
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 17


 568 002a 6268     		ldr	r2, [r4, #4]
 569 002c 3146     		mov	r1, r6
 570 002e 2846     		mov	r0, r5
 571 0030 FFF7FEFF 		bl	_lf_new_token
 572              	.LVL52:
 573 0034 0446     		mov	r4, r0
 574              	.LVL53:
 122:src-gen/Main/core/lf_token.c ****     // Arrange for the token to be released (and possibly freed) at
 575              		.loc 1 122 5 is_stmt 1 discriminator 3 view .LVU160
 122:src-gen/Main/core/lf_token.c ****     // Arrange for the token to be released (and possibly freed) at
 576              		.loc 1 122 23 is_stmt 0 discriminator 3 view .LVU161
 577 0036 0123     		movs	r3, #1
 578 0038 C360     		str	r3, [r0, #12]
 125:src-gen/Main/core/lf_token.c ****     _lf_tokens_allocated_in_reactions = result;
 579              		.loc 1 125 5 is_stmt 1 discriminator 3 view .LVU162
 125:src-gen/Main/core/lf_token.c ****     _lf_tokens_allocated_in_reactions = result;
 580              		.loc 1 125 18 is_stmt 0 discriminator 3 view .LVU163
 581 003a 124B     		ldr	r3, .L56+4
 582 003c 1A68     		ldr	r2, [r3]
 583 003e 0261     		str	r2, [r0, #16]
 126:src-gen/Main/core/lf_token.c **** 
 584              		.loc 1 126 5 is_stmt 1 discriminator 3 view .LVU164
 126:src-gen/Main/core/lf_token.c **** 
 585              		.loc 1 126 39 is_stmt 0 discriminator 3 view .LVU165
 586 0040 1860     		str	r0, [r3]
 128:src-gen/Main/core/lf_token.c **** }
 587              		.loc 1 128 5 is_stmt 1 discriminator 3 view .LVU166
 588              	.LVL54:
 589              	.L44:
 129:src-gen/Main/core/lf_token.c **** 
 590              		.loc 1 129 1 is_stmt 0 view .LVU167
 591 0042 2046     		mov	r0, r4
 592 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 593              	.LVL55:
 594              	.L52:
  83:src-gen/Main/core/lf_token.c **** 
 595              		.loc 1 83 5 discriminator 1 view .LVU168
 596 0046 104B     		ldr	r3, .L56+8
 597 0048 104A     		ldr	r2, .L56+12
 598 004a 5321     		movs	r1, #83
 599 004c 1048     		ldr	r0, .L56+16
 600              	.LVL56:
  83:src-gen/Main/core/lf_token.c **** 
 601              		.loc 1 83 5 discriminator 1 view .LVU169
 602 004e FFF7FEFF 		bl	__assert_func
 603              	.LVL57:
 604              	.L53:
  89:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
 605              		.loc 1 89 45 discriminator 1 view .LVU170
 606 0052 E368     		ldr	r3, [r4, #12]
  89:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("lf_writable_copy: Avoided copy because there "
 607              		.loc 1 89 37 discriminator 1 view .LVU171
 608 0054 012B     		cmp	r3, #1
 609 0056 DBD1     		bne	.L47
 610 0058 F3E7     		b	.L44
 611              	.L54:
 612              	.LBB5:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 18


  99:src-gen/Main/core/lf_token.c ****         size_t size = port->tmplt.type.element_size * token->length;
 613              		.loc 1 99 9 is_stmt 1 discriminator 3 view .LVU172
  99:src-gen/Main/core/lf_token.c ****         size_t size = port->tmplt.type.element_size * token->length;
 614              		.loc 1 99 9 discriminator 3 view .LVU173
  99:src-gen/Main/core/lf_token.c ****         size_t size = port->tmplt.type.element_size * token->length;
 615              		.loc 1 99 9 discriminator 3 view .LVU174
 100:src-gen/Main/core/lf_token.c ****         if (size == 0) {
 616              		.loc 1 100 9 discriminator 3 view .LVU175
 100:src-gen/Main/core/lf_token.c ****         if (size == 0) {
 617              		.loc 1 100 39 is_stmt 0 discriminator 3 view .LVU176
 618 005a 2F68     		ldr	r7, [r5]
 100:src-gen/Main/core/lf_token.c ****         if (size == 0) {
 619              		.loc 1 100 60 discriminator 3 view .LVU177
 620 005c 6368     		ldr	r3, [r4, #4]
 100:src-gen/Main/core/lf_token.c ****         if (size == 0) {
 621              		.loc 1 100 16 discriminator 3 view .LVU178
 622 005e 03FB07F7 		mul	r7, r3, r7
 623              	.LVL58:
 101:src-gen/Main/core/lf_token.c ****             return token;
 624              		.loc 1 101 9 is_stmt 1 discriminator 3 view .LVU179
 101:src-gen/Main/core/lf_token.c ****             return token;
 625              		.loc 1 101 12 is_stmt 0 discriminator 3 view .LVU180
 626 0062 002F     		cmp	r7, #0
 627 0064 EDD0     		beq	.L44
 104:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("Allocating memory for writable copy %p.", copy);
 628              		.loc 1 104 9 is_stmt 1 view .LVU181
 104:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("Allocating memory for writable copy %p.", copy);
 629              		.loc 1 104 16 is_stmt 0 view .LVU182
 630 0066 3846     		mov	r0, r7
 631              	.LVL59:
 104:src-gen/Main/core/lf_token.c ****         LF_PRINT_DEBUG("Allocating memory for writable copy %p.", copy);
 632              		.loc 1 104 16 view .LVU183
 633 0068 FFF7FEFF 		bl	malloc
 634              	.LVL60:
 635 006c 0646     		mov	r6, r0
 636              	.LVL61:
 105:src-gen/Main/core/lf_token.c ****         memcpy(copy, token->value, size);
 637              		.loc 1 105 9 is_stmt 1 view .LVU184
 105:src-gen/Main/core/lf_token.c ****         memcpy(copy, token->value, size);
 638              		.loc 1 105 9 view .LVU185
 105:src-gen/Main/core/lf_token.c ****         memcpy(copy, token->value, size);
 639              		.loc 1 105 9 view .LVU186
 106:src-gen/Main/core/lf_token.c ****     } else {
 640              		.loc 1 106 9 view .LVU187
 641 006e 3A46     		mov	r2, r7
 642 0070 2168     		ldr	r1, [r4]
 643 0072 FFF7FEFF 		bl	memcpy
 644              	.LVL62:
 106:src-gen/Main/core/lf_token.c ****     } else {
 645              		.loc 1 106 9 is_stmt 0 view .LVU188
 646              	.LBE5:
 647 0076 D4E7     		b	.L49
 648              	.LVL63:
 649              	.L55:
 110:src-gen/Main/core/lf_token.c ****                     "without setting destructor. Potential memory leak.");
 650              		.loc 1 110 13 is_stmt 1 view .LVU189
 651 0078 0648     		ldr	r0, .L56+20
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 19


 652              	.LVL64:
 110:src-gen/Main/core/lf_token.c ****                     "without setting destructor. Potential memory leak.");
 653              		.loc 1 110 13 is_stmt 0 view .LVU190
 654 007a FFF7FEFF 		bl	lf_print_warning
 655              	.LVL65:
 656 007e CCE7     		b	.L50
 657              	.L57:
 658              		.align	2
 659              	.L56:
 660 0080 00000000 		.word	_lf_count_payload_allocations
 661 0084 00000000 		.word	_lf_tokens_allocated_in_reactions
 662 0088 00000000 		.word	.LC4
 663 008c 00000000 		.word	__func__.4
 664 0090 10000000 		.word	.LC5
 665 0094 30000000 		.word	.LC6
 666              		.cfi_endproc
 667              	.LFE131:
 669              		.section	.rodata._lf_done_using.str1.4,"aMS",%progbits,1
 670              		.align	2
 671              	.LC7:
 672 0000 546F6B65 		.ascii	"Token being freed that has already been freed: %p\000"
 672      6E206265 
 672      696E6720 
 672      66726565 
 672      64207468 
 673              		.section	.text._lf_done_using,"ax",%progbits
 674              		.align	1
 675              		.global	_lf_done_using
 676              		.syntax unified
 677              		.thumb
 678              		.thumb_func
 680              	_lf_done_using:
 681              	.LVL66:
 682              	.LFB141:
 223:src-gen/Main/core/lf_token.c **** 
 224:src-gen/Main/core/lf_token.c **** lf_token_t* _lf_get_token(token_template_t* tmplt) {
 225:src-gen/Main/core/lf_token.c ****     if (tmplt->token != NULL) {
 226:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1) {
 227:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_get_token: Reusing template token: %p with ref_count %zu",
 228:src-gen/Main/core/lf_token.c ****                     tmplt->token, tmplt->token->ref_count);
 229:src-gen/Main/core/lf_token.c ****             // Free any previous value in the token.
 230:src-gen/Main/core/lf_token.c ****             _lf_free_token_value(tmplt->token);
 231:src-gen/Main/core/lf_token.c ****             return tmplt->token;
 232:src-gen/Main/core/lf_token.c ****         } else {
 233:src-gen/Main/core/lf_token.c ****             // Liberate the token.
 234:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 235:src-gen/Main/core/lf_token.c ****         }
 236:src-gen/Main/core/lf_token.c ****     }
 237:src-gen/Main/core/lf_token.c ****     // If we get here, we need a new token.
 238:src-gen/Main/core/lf_token.c ****     tmplt->token = _lf_new_token((token_type_t*)tmplt, NULL, 0);
 239:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 240:src-gen/Main/core/lf_token.c ****     return tmplt->token;
 241:src-gen/Main/core/lf_token.c **** }
 242:src-gen/Main/core/lf_token.c **** 
 243:src-gen/Main/core/lf_token.c **** void _lf_initialize_template(token_template_t* tmplt, size_t element_size) {
 244:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 245:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 20


 246:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 247:src-gen/Main/core/lf_token.c ****     }
 248:src-gen/Main/core/lf_token.c ****     if (_lf_token_templates == NULL) {
 249:src-gen/Main/core/lf_token.c ****         _lf_token_templates = hashset_create(4); // Initial size is 16.
 250:src-gen/Main/core/lf_token.c ****     }
 251:src-gen/Main/core/lf_token.c ****     hashset_add(_lf_token_templates, tmplt);
 252:src-gen/Main/core/lf_token.c ****     if(lf_critical_section_exit(GLOBAL_ENVIRONMENT) != 0) {
 253:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 254:src-gen/Main/core/lf_token.c ****     }
 255:src-gen/Main/core/lf_token.c ****     if (tmplt->token != NULL) {
 256:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1 && tmplt->token->type->element_size == element_size) {
 257:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 258:src-gen/Main/core/lf_token.c ****             // If it has a value, free it.
 259:src-gen/Main/core/lf_token.c ****             _lf_free_token_value(tmplt->token);
 260:src-gen/Main/core/lf_token.c ****             // Make sure its reference count is 1 (it should not be 0).
 261:src-gen/Main/core/lf_token.c ****             tmplt->token->ref_count = 1;
 262:src-gen/Main/core/lf_token.c ****             return;
 263:src-gen/Main/core/lf_token.c ****         }
 264:src-gen/Main/core/lf_token.c ****         // Replace the token.
 265:src-gen/Main/core/lf_token.c ****         _lf_done_using(tmplt->token);
 266:src-gen/Main/core/lf_token.c ****         tmplt->token = NULL;
 267:src-gen/Main/core/lf_token.c ****     }
 268:src-gen/Main/core/lf_token.c ****     tmplt->type.element_size = element_size;
 269:src-gen/Main/core/lf_token.c ****     tmplt->token = _lf_new_token((token_type_t*)tmplt, NULL, 0);
 270:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 271:src-gen/Main/core/lf_token.c **** }
 272:src-gen/Main/core/lf_token.c **** 
 273:src-gen/Main/core/lf_token.c **** lf_token_t* _lf_initialize_token_with_value(token_template_t* tmplt, void* value, size_t length) {
 274:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 275:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 276:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_get_token(tmplt);
 277:src-gen/Main/core/lf_token.c ****     result->value = value;
 278:src-gen/Main/core/lf_token.c ****     // Count allocations to issue a warning if this is never freed.
 279:src-gen/Main/core/lf_token.c ****     _lf_count_payload_allocations++;
 280:src-gen/Main/core/lf_token.c ****     result->length = length;
 281:src-gen/Main/core/lf_token.c ****     return result;
 282:src-gen/Main/core/lf_token.c **** }
 283:src-gen/Main/core/lf_token.c **** 
 284:src-gen/Main/core/lf_token.c **** lf_token_t* _lf_initialize_token(token_template_t* tmplt, size_t length) {
 285:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 286:src-gen/Main/core/lf_token.c ****     // Allocate memory for storing the array.
 287:src-gen/Main/core/lf_token.c ****     void* value = calloc(length, tmplt->type.element_size);
 288:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_initialize_token_with_value(tmplt, value, length);
 289:src-gen/Main/core/lf_token.c ****     return result;
 290:src-gen/Main/core/lf_token.c **** }
 291:src-gen/Main/core/lf_token.c **** 
 292:src-gen/Main/core/lf_token.c **** void _lf_free_all_tokens() {
 293:src-gen/Main/core/lf_token.c ****     // Free template tokens.
 294:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 295:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 296:src-gen/Main/core/lf_token.c ****     }
 297:src-gen/Main/core/lf_token.c ****     // It is possible for a token to be a template token for more than one port
 298:src-gen/Main/core/lf_token.c ****     // or action because the same token may be sent to multiple output ports.
 299:src-gen/Main/core/lf_token.c ****     if (_lf_token_templates != NULL) {
 300:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_templates);
 301:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 302:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 21


 303:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 304:src-gen/Main/core/lf_token.c ****             tmplt->token = NULL;
 305:src-gen/Main/core/lf_token.c ****         }
 306:src-gen/Main/core/lf_token.c ****         free(iterator);
 307:src-gen/Main/core/lf_token.c ****         hashset_destroy(_lf_token_templates);
 308:src-gen/Main/core/lf_token.c ****         _lf_token_templates = NULL;
 309:src-gen/Main/core/lf_token.c ****     }
 310:src-gen/Main/core/lf_token.c ****     if (_lf_token_recycling_bin != NULL) {
 311:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_recycling_bin);
 312:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 313:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 314:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("Freeing token from _lf_token_recycling_bin: %p", token);
 315:src-gen/Main/core/lf_token.c ****             // Payload should already be freed, so we just free the token:
 316:src-gen/Main/core/lf_token.c ****             free(token);
 317:src-gen/Main/core/lf_token.c ****         }
 318:src-gen/Main/core/lf_token.c ****         free(iterator);
 319:src-gen/Main/core/lf_token.c ****         hashset_destroy(_lf_token_recycling_bin);
 320:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = NULL;
 321:src-gen/Main/core/lf_token.c ****     }
 322:src-gen/Main/core/lf_token.c ****     if(lf_critical_section_exit(GLOBAL_ENVIRONMENT) != 0) {
 323:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 324:src-gen/Main/core/lf_token.c ****     }
 325:src-gen/Main/core/lf_token.c **** }
 326:src-gen/Main/core/lf_token.c **** 
 327:src-gen/Main/core/lf_token.c **** void _lf_replace_template_token(token_template_t* tmplt, lf_token_t* newtoken) {
 328:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 329:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_replace_template_token: template: %p newtoken: %p.", tmplt, newtoken);
 330:src-gen/Main/core/lf_token.c ****     if (tmplt->token != newtoken) {
 331:src-gen/Main/core/lf_token.c ****         if (tmplt->token != NULL) {
 332:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 333:src-gen/Main/core/lf_token.c ****         }
 334:src-gen/Main/core/lf_token.c ****         if (newtoken != NULL) {
 335:src-gen/Main/core/lf_token.c ****             newtoken->ref_count++;
 336:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_replace_template_token: Incremented ref_count of %p to %zu.",
 337:src-gen/Main/core/lf_token.c ****                     newtoken, newtoken->ref_count);
 338:src-gen/Main/core/lf_token.c ****         }
 339:src-gen/Main/core/lf_token.c ****         tmplt->token = newtoken;
 340:src-gen/Main/core/lf_token.c ****     }
 341:src-gen/Main/core/lf_token.c **** }
 342:src-gen/Main/core/lf_token.c **** 
 343:src-gen/Main/core/lf_token.c **** token_freed _lf_done_using(lf_token_t* token) {
 683              		.loc 1 343 47 is_stmt 1 view -0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 0
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 344:src-gen/Main/core/lf_token.c ****     if (token == NULL) {
 687              		.loc 1 344 5 view .LVU192
 688              		.loc 1 344 8 is_stmt 0 view .LVU193
 689 0000 68B1     		cbz	r0, .L61
 343:src-gen/Main/core/lf_token.c ****     if (token == NULL) {
 690              		.loc 1 343 47 discriminator 3 view .LVU194
 691 0002 08B5     		push	{r3, lr}
 692              	.LCFI7:
 693              		.cfi_def_cfa_offset 8
 694              		.cfi_offset 3, -8
 695              		.cfi_offset 14, -4
 696 0004 0146     		mov	r1, r0
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 22


 345:src-gen/Main/core/lf_token.c ****         return NOT_FREED;
 346:src-gen/Main/core/lf_token.c ****     }
 347:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_done_using: token = %p, ref_count = %zu.", token, token->ref_count);
 697              		.loc 1 347 5 is_stmt 1 discriminator 3 view .LVU195
 698              		.loc 1 347 5 discriminator 3 view .LVU196
 699              		.loc 1 347 5 discriminator 3 view .LVU197
 348:src-gen/Main/core/lf_token.c ****     if (token->ref_count == 0) {
 700              		.loc 1 348 5 discriminator 3 view .LVU198
 701              		.loc 1 348 14 is_stmt 0 discriminator 3 view .LVU199
 702 0006 C368     		ldr	r3, [r0, #12]
 703              		.loc 1 348 8 discriminator 3 view .LVU200
 704 0008 23B1     		cbz	r3, .L66
 349:src-gen/Main/core/lf_token.c ****         lf_print_warning("Token being freed that has already been freed: %p", token);
 350:src-gen/Main/core/lf_token.c ****         return NOT_FREED;
 351:src-gen/Main/core/lf_token.c ****     }
 352:src-gen/Main/core/lf_token.c ****     token->ref_count--;
 705              		.loc 1 352 5 is_stmt 1 view .LVU201
 706              		.loc 1 352 21 is_stmt 0 view .LVU202
 707 000a 013B     		subs	r3, r3, #1
 708 000c C360     		str	r3, [r0, #12]
 353:src-gen/Main/core/lf_token.c ****     return _lf_free_token(token);
 709              		.loc 1 353 5 is_stmt 1 view .LVU203
 710              		.loc 1 353 12 is_stmt 0 view .LVU204
 711 000e FFF7FEFF 		bl	_lf_free_token
 712              	.LVL67:
 713              	.L59:
 354:src-gen/Main/core/lf_token.c **** }
 714              		.loc 1 354 1 view .LVU205
 715 0012 08BD     		pop	{r3, pc}
 716              	.LVL68:
 717              	.L66:
 349:src-gen/Main/core/lf_token.c ****         lf_print_warning("Token being freed that has already been freed: %p", token);
 718              		.loc 1 349 9 is_stmt 1 view .LVU206
 719 0014 0348     		ldr	r0, .L67
 720              	.LVL69:
 349:src-gen/Main/core/lf_token.c ****         lf_print_warning("Token being freed that has already been freed: %p", token);
 721              		.loc 1 349 9 is_stmt 0 view .LVU207
 722 0016 FFF7FEFF 		bl	lf_print_warning
 723              	.LVL70:
 350:src-gen/Main/core/lf_token.c ****     }
 724              		.loc 1 350 9 is_stmt 1 view .LVU208
 350:src-gen/Main/core/lf_token.c ****     }
 725              		.loc 1 350 16 is_stmt 0 view .LVU209
 726 001a 0020     		movs	r0, #0
 727 001c F9E7     		b	.L59
 728              	.LVL71:
 729              	.L61:
 730              	.LCFI8:
 731              		.cfi_def_cfa_offset 0
 732              		.cfi_restore 3
 733              		.cfi_restore 14
 345:src-gen/Main/core/lf_token.c ****     }
 734              		.loc 1 345 16 view .LVU210
 735 001e 0020     		movs	r0, #0
 736              	.LVL72:
 737              		.loc 1 354 1 view .LVU211
 738 0020 7047     		bx	lr
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 23


 739              	.L68:
 740 0022 00BF     		.align	2
 741              	.L67:
 742 0024 00000000 		.word	.LC7
 743              		.cfi_endproc
 744              	.LFE141:
 746              		.section	.text._lf_get_token,"ax",%progbits
 747              		.align	1
 748              		.global	_lf_get_token
 749              		.syntax unified
 750              		.thumb
 751              		.thumb_func
 753              	_lf_get_token:
 754              	.LVL73:
 755              	.LFB135:
 224:src-gen/Main/core/lf_token.c ****     if (tmplt->token != NULL) {
 756              		.loc 1 224 52 is_stmt 1 view -0
 757              		.cfi_startproc
 758              		@ args = 0, pretend = 0, frame = 0
 759              		@ frame_needed = 0, uses_anonymous_args = 0
 224:src-gen/Main/core/lf_token.c ****     if (tmplt->token != NULL) {
 760              		.loc 1 224 52 is_stmt 0 view .LVU213
 761 0000 10B5     		push	{r4, lr}
 762              	.LCFI9:
 763              		.cfi_def_cfa_offset 8
 764              		.cfi_offset 4, -8
 765              		.cfi_offset 14, -4
 766 0002 0446     		mov	r4, r0
 225:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1) {
 767              		.loc 1 225 5 is_stmt 1 view .LVU214
 225:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1) {
 768              		.loc 1 225 14 is_stmt 0 view .LVU215
 769 0004 C068     		ldr	r0, [r0, #12]
 770              	.LVL74:
 225:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1) {
 771              		.loc 1 225 8 view .LVU216
 772 0006 20B1     		cbz	r0, .L70
 226:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_get_token: Reusing template token: %p with ref_count %zu",
 773              		.loc 1 226 9 is_stmt 1 view .LVU217
 226:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_get_token: Reusing template token: %p with ref_count %zu",
 774              		.loc 1 226 25 is_stmt 0 view .LVU218
 775 0008 C368     		ldr	r3, [r0, #12]
 226:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_get_token: Reusing template token: %p with ref_count %zu",
 776              		.loc 1 226 12 view .LVU219
 777 000a 012B     		cmp	r3, #1
 778 000c 0BD0     		beq	.L74
 234:src-gen/Main/core/lf_token.c ****         }
 779              		.loc 1 234 13 is_stmt 1 view .LVU220
 780 000e FFF7FEFF 		bl	_lf_done_using
 781              	.LVL75:
 782              	.L70:
 238:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 783              		.loc 1 238 5 view .LVU221
 238:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 784              		.loc 1 238 20 is_stmt 0 view .LVU222
 785 0012 0022     		movs	r2, #0
 786 0014 1146     		mov	r1, r2
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 24


 787 0016 2046     		mov	r0, r4
 788 0018 FFF7FEFF 		bl	_lf_new_token
 789              	.LVL76:
 238:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 790              		.loc 1 238 18 view .LVU223
 791 001c E060     		str	r0, [r4, #12]
 239:src-gen/Main/core/lf_token.c ****     return tmplt->token;
 792              		.loc 1 239 5 is_stmt 1 view .LVU224
 239:src-gen/Main/core/lf_token.c ****     return tmplt->token;
 793              		.loc 1 239 29 is_stmt 0 view .LVU225
 794 001e 0123     		movs	r3, #1
 795 0020 C360     		str	r3, [r0, #12]
 240:src-gen/Main/core/lf_token.c **** }
 796              		.loc 1 240 5 is_stmt 1 view .LVU226
 240:src-gen/Main/core/lf_token.c **** }
 797              		.loc 1 240 17 is_stmt 0 view .LVU227
 798 0022 E068     		ldr	r0, [r4, #12]
 799              	.L69:
 241:src-gen/Main/core/lf_token.c **** 
 800              		.loc 1 241 1 view .LVU228
 801 0024 10BD     		pop	{r4, pc}
 802              	.LVL77:
 803              	.L74:
 227:src-gen/Main/core/lf_token.c ****                     tmplt->token, tmplt->token->ref_count);
 804              		.loc 1 227 13 is_stmt 1 discriminator 3 view .LVU229
 227:src-gen/Main/core/lf_token.c ****                     tmplt->token, tmplt->token->ref_count);
 805              		.loc 1 227 13 discriminator 3 view .LVU230
 227:src-gen/Main/core/lf_token.c ****                     tmplt->token, tmplt->token->ref_count);
 806              		.loc 1 227 13 discriminator 3 view .LVU231
 230:src-gen/Main/core/lf_token.c ****             return tmplt->token;
 807              		.loc 1 230 13 discriminator 3 view .LVU232
 808 0026 FFF7FEFF 		bl	_lf_free_token_value
 809              	.LVL78:
 231:src-gen/Main/core/lf_token.c ****         } else {
 810              		.loc 1 231 13 discriminator 3 view .LVU233
 231:src-gen/Main/core/lf_token.c ****         } else {
 811              		.loc 1 231 25 is_stmt 0 discriminator 3 view .LVU234
 812 002a E068     		ldr	r0, [r4, #12]
 813 002c FAE7     		b	.L69
 814              		.cfi_endproc
 815              	.LFE135:
 817              		.section	.rodata._lf_initialize_token_with_value.str1.4,"aMS",%progbits,1
 818              		.align	2
 819              	.LC8:
 820 0000 746D706C 		.ascii	"tmplt != NULL\000"
 820      7420213D 
 820      204E554C 
 820      4C00
 821              		.section	.text._lf_initialize_token_with_value,"ax",%progbits
 822              		.align	1
 823              		.global	_lf_initialize_token_with_value
 824              		.syntax unified
 825              		.thumb
 826              		.thumb_func
 828              	_lf_initialize_token_with_value:
 829              	.LVL79:
 830              	.LFB137:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 25


 273:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 831              		.loc 1 273 98 is_stmt 1 view -0
 832              		.cfi_startproc
 833              		@ args = 0, pretend = 0, frame = 0
 834              		@ frame_needed = 0, uses_anonymous_args = 0
 273:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 835              		.loc 1 273 98 is_stmt 0 view .LVU236
 836 0000 38B5     		push	{r3, r4, r5, lr}
 837              	.LCFI10:
 838              		.cfi_def_cfa_offset 16
 839              		.cfi_offset 3, -16
 840              		.cfi_offset 4, -12
 841              		.cfi_offset 5, -8
 842              		.cfi_offset 14, -4
 274:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 843              		.loc 1 274 5 is_stmt 1 view .LVU237
 844 0002 50B1     		cbz	r0, .L78
 845 0004 0C46     		mov	r4, r1
 846 0006 1546     		mov	r5, r2
 275:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_get_token(tmplt);
 847              		.loc 1 275 5 discriminator 3 view .LVU238
 275:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_get_token(tmplt);
 848              		.loc 1 275 5 discriminator 3 view .LVU239
 275:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_get_token(tmplt);
 849              		.loc 1 275 5 discriminator 3 view .LVU240
 276:src-gen/Main/core/lf_token.c ****     result->value = value;
 850              		.loc 1 276 5 discriminator 3 view .LVU241
 276:src-gen/Main/core/lf_token.c ****     result->value = value;
 851              		.loc 1 276 26 is_stmt 0 discriminator 3 view .LVU242
 852 0008 FFF7FEFF 		bl	_lf_get_token
 853              	.LVL80:
 277:src-gen/Main/core/lf_token.c ****     // Count allocations to issue a warning if this is never freed.
 854              		.loc 1 277 5 is_stmt 1 discriminator 3 view .LVU243
 277:src-gen/Main/core/lf_token.c ****     // Count allocations to issue a warning if this is never freed.
 855              		.loc 1 277 19 is_stmt 0 discriminator 3 view .LVU244
 856 000c 0460     		str	r4, [r0]
 279:src-gen/Main/core/lf_token.c ****     result->length = length;
 857              		.loc 1 279 5 is_stmt 1 discriminator 3 view .LVU245
 279:src-gen/Main/core/lf_token.c ****     result->length = length;
 858              		.loc 1 279 34 is_stmt 0 discriminator 3 view .LVU246
 859 000e 064C     		ldr	r4, .L79
 860              	.LVL81:
 279:src-gen/Main/core/lf_token.c ****     result->length = length;
 861              		.loc 1 279 34 discriminator 3 view .LVU247
 862 0010 2168     		ldr	r1, [r4]
 863 0012 0131     		adds	r1, r1, #1
 864 0014 2160     		str	r1, [r4]
 865              	.LVL82:
 280:src-gen/Main/core/lf_token.c ****     return result;
 866              		.loc 1 280 5 is_stmt 1 discriminator 3 view .LVU248
 280:src-gen/Main/core/lf_token.c ****     return result;
 867              		.loc 1 280 20 is_stmt 0 discriminator 3 view .LVU249
 868 0016 4560     		str	r5, [r0, #4]
 281:src-gen/Main/core/lf_token.c **** }
 869              		.loc 1 281 5 is_stmt 1 discriminator 3 view .LVU250
 282:src-gen/Main/core/lf_token.c **** 
 870              		.loc 1 282 1 is_stmt 0 discriminator 3 view .LVU251
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 26


 871 0018 38BD     		pop	{r3, r4, r5, pc}
 872              	.LVL83:
 873              	.L78:
 274:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 874              		.loc 1 274 5 discriminator 1 view .LVU252
 875 001a 044B     		ldr	r3, .L79+4
 876 001c 044A     		ldr	r2, .L79+8
 877              	.LVL84:
 274:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 878              		.loc 1 274 5 discriminator 1 view .LVU253
 879 001e 4FF48971 		mov	r1, #274
 880              	.LVL85:
 274:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 881              		.loc 1 274 5 discriminator 1 view .LVU254
 882 0022 0448     		ldr	r0, .L79+12
 883              	.LVL86:
 274:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_initialize_token_with_value: template %p, value %p", tmplt, value);
 884              		.loc 1 274 5 discriminator 1 view .LVU255
 885 0024 FFF7FEFF 		bl	__assert_func
 886              	.LVL87:
 887              	.L80:
 888              		.align	2
 889              	.L79:
 890 0028 00000000 		.word	_lf_count_payload_allocations
 891 002c 00000000 		.word	.LC8
 892 0030 00000000 		.word	__func__.2
 893 0034 10000000 		.word	.LC5
 894              		.cfi_endproc
 895              	.LFE137:
 897              		.section	.text._lf_initialize_token,"ax",%progbits
 898              		.align	1
 899              		.global	_lf_initialize_token
 900              		.syntax unified
 901              		.thumb
 902              		.thumb_func
 904              	_lf_initialize_token:
 905              	.LVL88:
 906              	.LFB138:
 284:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 907              		.loc 1 284 74 is_stmt 1 view -0
 908              		.cfi_startproc
 909              		@ args = 0, pretend = 0, frame = 0
 910              		@ frame_needed = 0, uses_anonymous_args = 0
 284:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 911              		.loc 1 284 74 is_stmt 0 view .LVU257
 912 0000 38B5     		push	{r3, r4, r5, lr}
 913              	.LCFI11:
 914              		.cfi_def_cfa_offset 16
 915              		.cfi_offset 3, -16
 916              		.cfi_offset 4, -12
 917              		.cfi_offset 5, -8
 918              		.cfi_offset 14, -4
 285:src-gen/Main/core/lf_token.c ****     // Allocate memory for storing the array.
 919              		.loc 1 285 5 is_stmt 1 view .LVU258
 920 0002 58B1     		cbz	r0, .L84
 921 0004 0C46     		mov	r4, r1
 922 0006 0546     		mov	r5, r0
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 27


 287:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_initialize_token_with_value(tmplt, value, length);
 923              		.loc 1 287 5 view .LVU259
 287:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_initialize_token_with_value(tmplt, value, length);
 924              		.loc 1 287 19 is_stmt 0 view .LVU260
 925 0008 0168     		ldr	r1, [r0]
 926              	.LVL89:
 287:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_initialize_token_with_value(tmplt, value, length);
 927              		.loc 1 287 19 view .LVU261
 928 000a 2046     		mov	r0, r4
 929              	.LVL90:
 287:src-gen/Main/core/lf_token.c ****     lf_token_t* result = _lf_initialize_token_with_value(tmplt, value, length);
 930              		.loc 1 287 19 view .LVU262
 931 000c FFF7FEFF 		bl	calloc
 932              	.LVL91:
 933 0010 0146     		mov	r1, r0
 934              	.LVL92:
 288:src-gen/Main/core/lf_token.c ****     return result;
 935              		.loc 1 288 5 is_stmt 1 view .LVU263
 288:src-gen/Main/core/lf_token.c ****     return result;
 936              		.loc 1 288 26 is_stmt 0 view .LVU264
 937 0012 2246     		mov	r2, r4
 938 0014 2846     		mov	r0, r5
 939              	.LVL93:
 288:src-gen/Main/core/lf_token.c ****     return result;
 940              		.loc 1 288 26 view .LVU265
 941 0016 FFF7FEFF 		bl	_lf_initialize_token_with_value
 942              	.LVL94:
 289:src-gen/Main/core/lf_token.c **** }
 943              		.loc 1 289 5 is_stmt 1 view .LVU266
 290:src-gen/Main/core/lf_token.c **** 
 944              		.loc 1 290 1 is_stmt 0 view .LVU267
 945 001a 38BD     		pop	{r3, r4, r5, pc}
 946              	.LVL95:
 947              	.L84:
 285:src-gen/Main/core/lf_token.c ****     // Allocate memory for storing the array.
 948              		.loc 1 285 5 discriminator 1 view .LVU268
 949 001c 034B     		ldr	r3, .L85
 950 001e 044A     		ldr	r2, .L85+4
 951 0020 40F21D11 		movw	r1, #285
 952              	.LVL96:
 285:src-gen/Main/core/lf_token.c ****     // Allocate memory for storing the array.
 953              		.loc 1 285 5 discriminator 1 view .LVU269
 954 0024 0348     		ldr	r0, .L85+8
 955              	.LVL97:
 285:src-gen/Main/core/lf_token.c ****     // Allocate memory for storing the array.
 956              		.loc 1 285 5 discriminator 1 view .LVU270
 957 0026 FFF7FEFF 		bl	__assert_func
 958              	.LVL98:
 959              	.L86:
 960 002a 00BF     		.align	2
 961              	.L85:
 962 002c 00000000 		.word	.LC8
 963 0030 00000000 		.word	__func__.1
 964 0034 10000000 		.word	.LC5
 965              		.cfi_endproc
 966              	.LFE138:
 968              		.section	.text._lf_initialize_template,"ax",%progbits
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 28


 969              		.align	1
 970              		.global	_lf_initialize_template
 971              		.syntax unified
 972              		.thumb
 973              		.thumb_func
 975              	_lf_initialize_template:
 976              	.LVL99:
 977              	.LFB136:
 243:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 978              		.loc 1 243 76 is_stmt 1 view -0
 979              		.cfi_startproc
 980              		@ args = 0, pretend = 0, frame = 0
 981              		@ frame_needed = 0, uses_anonymous_args = 0
 243:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 982              		.loc 1 243 76 is_stmt 0 view .LVU272
 983 0000 38B5     		push	{r3, r4, r5, lr}
 984              	.LCFI12:
 985              		.cfi_def_cfa_offset 16
 986              		.cfi_offset 3, -16
 987              		.cfi_offset 4, -12
 988              		.cfi_offset 5, -8
 989              		.cfi_offset 14, -4
 244:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 990              		.loc 1 244 5 is_stmt 1 view .LVU273
 991 0002 40B3     		cbz	r0, .L96
 992 0004 0D46     		mov	r5, r1
 993 0006 0446     		mov	r4, r0
 245:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 994              		.loc 1 245 5 view .LVU274
 245:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 995              		.loc 1 245 9 is_stmt 0 view .LVU275
 996 0008 0020     		movs	r0, #0
 997              	.LVL100:
 245:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 998              		.loc 1 245 9 view .LVU276
 999 000a FFF7FEFF 		bl	lf_critical_section_enter
 1000              	.LVL101:
 245:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 1001              		.loc 1 245 8 view .LVU277
 1002 000e 40BB     		cbnz	r0, .L97
 1003              	.L89:
 248:src-gen/Main/core/lf_token.c ****         _lf_token_templates = hashset_create(4); // Initial size is 16.
 1004              		.loc 1 248 5 is_stmt 1 view .LVU278
 248:src-gen/Main/core/lf_token.c ****         _lf_token_templates = hashset_create(4); // Initial size is 16.
 1005              		.loc 1 248 29 is_stmt 0 view .LVU279
 1006 0010 1E4B     		ldr	r3, .L101
 1007 0012 1B68     		ldr	r3, [r3]
 248:src-gen/Main/core/lf_token.c ****         _lf_token_templates = hashset_create(4); // Initial size is 16.
 1008              		.loc 1 248 8 view .LVU280
 1009 0014 4BB3     		cbz	r3, .L98
 1010              	.L90:
 251:src-gen/Main/core/lf_token.c ****     if(lf_critical_section_exit(GLOBAL_ENVIRONMENT) != 0) {
 1011              		.loc 1 251 5 is_stmt 1 view .LVU281
 1012 0016 2146     		mov	r1, r4
 1013 0018 1C4B     		ldr	r3, .L101
 1014 001a 1868     		ldr	r0, [r3]
 1015 001c FFF7FEFF 		bl	hashset_add
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 29


 1016              	.LVL102:
 252:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1017              		.loc 1 252 5 view .LVU282
 252:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1018              		.loc 1 252 8 is_stmt 0 view .LVU283
 1019 0020 0020     		movs	r0, #0
 1020 0022 FFF7FEFF 		bl	lf_critical_section_exit
 1021              	.LVL103:
 252:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1022              		.loc 1 252 7 view .LVU284
 1023 0026 30BB     		cbnz	r0, .L99
 1024              	.L91:
 255:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1 && tmplt->token->type->element_size == element_size) {
 1025              		.loc 1 255 5 is_stmt 1 view .LVU285
 255:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1 && tmplt->token->type->element_size == element_size) {
 1026              		.loc 1 255 14 is_stmt 0 view .LVU286
 1027 0028 E068     		ldr	r0, [r4, #12]
 255:src-gen/Main/core/lf_token.c ****         if (tmplt->token->ref_count == 1 && tmplt->token->type->element_size == element_size) {
 1028              		.loc 1 255 8 view .LVU287
 1029 002a 50B1     		cbz	r0, .L92
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1030              		.loc 1 256 9 is_stmt 1 view .LVU288
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1031              		.loc 1 256 25 is_stmt 0 view .LVU289
 1032 002c C368     		ldr	r3, [r0, #12]
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1033              		.loc 1 256 12 view .LVU290
 1034 002e 012B     		cmp	r3, #1
 1035 0030 03D1     		bne	.L93
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1036              		.loc 1 256 57 discriminator 1 view .LVU291
 1037 0032 8368     		ldr	r3, [r0, #8]
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1038              		.loc 1 256 63 discriminator 1 view .LVU292
 1039 0034 1B68     		ldr	r3, [r3]
 256:src-gen/Main/core/lf_token.c ****             // Template token is already set.
 1040              		.loc 1 256 42 discriminator 1 view .LVU293
 1041 0036 AB42     		cmp	r3, r5
 1042 0038 21D0     		beq	.L100
 1043              	.L93:
 265:src-gen/Main/core/lf_token.c ****         tmplt->token = NULL;
 1044              		.loc 1 265 9 is_stmt 1 view .LVU294
 1045 003a FFF7FEFF 		bl	_lf_done_using
 1046              	.LVL104:
 266:src-gen/Main/core/lf_token.c ****     }
 1047              		.loc 1 266 9 view .LVU295
 266:src-gen/Main/core/lf_token.c ****     }
 1048              		.loc 1 266 22 is_stmt 0 view .LVU296
 1049 003e 0023     		movs	r3, #0
 1050 0040 E360     		str	r3, [r4, #12]
 1051              	.L92:
 268:src-gen/Main/core/lf_token.c ****     tmplt->token = _lf_new_token((token_type_t*)tmplt, NULL, 0);
 1052              		.loc 1 268 5 is_stmt 1 view .LVU297
 268:src-gen/Main/core/lf_token.c ****     tmplt->token = _lf_new_token((token_type_t*)tmplt, NULL, 0);
 1053              		.loc 1 268 30 is_stmt 0 view .LVU298
 1054 0042 2560     		str	r5, [r4]
 269:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 30


 1055              		.loc 1 269 5 is_stmt 1 view .LVU299
 269:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 1056              		.loc 1 269 20 is_stmt 0 view .LVU300
 1057 0044 0022     		movs	r2, #0
 1058 0046 1146     		mov	r1, r2
 1059 0048 2046     		mov	r0, r4
 1060 004a FFF7FEFF 		bl	_lf_new_token
 1061              	.LVL105:
 269:src-gen/Main/core/lf_token.c ****     tmplt->token->ref_count = 1;
 1062              		.loc 1 269 18 view .LVU301
 1063 004e E060     		str	r0, [r4, #12]
 270:src-gen/Main/core/lf_token.c **** }
 1064              		.loc 1 270 5 is_stmt 1 view .LVU302
 270:src-gen/Main/core/lf_token.c **** }
 1065              		.loc 1 270 29 is_stmt 0 view .LVU303
 1066 0050 0123     		movs	r3, #1
 1067 0052 C360     		str	r3, [r0, #12]
 1068              	.L87:
 271:src-gen/Main/core/lf_token.c **** 
 1069              		.loc 1 271 1 view .LVU304
 1070 0054 38BD     		pop	{r3, r4, r5, pc}
 1071              	.LVL106:
 1072              	.L96:
 244:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 1073              		.loc 1 244 5 discriminator 1 view .LVU305
 1074 0056 0E4B     		ldr	r3, .L101+4
 1075 0058 0E4A     		ldr	r2, .L101+8
 1076 005a F421     		movs	r1, #244
 1077              	.LVL107:
 244:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 1078              		.loc 1 244 5 discriminator 1 view .LVU306
 1079 005c 0E48     		ldr	r0, .L101+12
 1080              	.LVL108:
 244:src-gen/Main/core/lf_token.c ****     if (lf_critical_section_enter(GLOBAL_ENVIRONMENT) != 0) {
 1081              		.loc 1 244 5 discriminator 1 view .LVU307
 1082 005e FFF7FEFF 		bl	__assert_func
 1083              	.LVL109:
 1084              	.L97:
 246:src-gen/Main/core/lf_token.c ****     }
 1085              		.loc 1 246 9 is_stmt 1 view .LVU308
 1086 0062 0E48     		ldr	r0, .L101+16
 1087 0064 FFF7FEFF 		bl	lf_print_error_and_exit
 1088              	.LVL110:
 1089 0068 D2E7     		b	.L89
 1090              	.L98:
 249:src-gen/Main/core/lf_token.c ****     }
 1091              		.loc 1 249 9 view .LVU309
 249:src-gen/Main/core/lf_token.c ****     }
 1092              		.loc 1 249 31 is_stmt 0 view .LVU310
 1093 006a 0420     		movs	r0, #4
 1094 006c FFF7FEFF 		bl	hashset_create
 1095              	.LVL111:
 249:src-gen/Main/core/lf_token.c ****     }
 1096              		.loc 1 249 29 view .LVU311
 1097 0070 064B     		ldr	r3, .L101
 1098 0072 1860     		str	r0, [r3]
 1099 0074 CFE7     		b	.L90
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 31


 1100              	.L99:
 253:src-gen/Main/core/lf_token.c ****     }
 1101              		.loc 1 253 9 is_stmt 1 view .LVU312
 1102 0076 0A48     		ldr	r0, .L101+20
 1103 0078 FFF7FEFF 		bl	lf_print_error_and_exit
 1104              	.LVL112:
 1105 007c D4E7     		b	.L91
 1106              	.L100:
 259:src-gen/Main/core/lf_token.c ****             // Make sure its reference count is 1 (it should not be 0).
 1107              		.loc 1 259 13 view .LVU313
 1108 007e FFF7FEFF 		bl	_lf_free_token_value
 1109              	.LVL113:
 261:src-gen/Main/core/lf_token.c ****             return;
 1110              		.loc 1 261 13 view .LVU314
 261:src-gen/Main/core/lf_token.c ****             return;
 1111              		.loc 1 261 18 is_stmt 0 view .LVU315
 1112 0082 E368     		ldr	r3, [r4, #12]
 261:src-gen/Main/core/lf_token.c ****             return;
 1113              		.loc 1 261 37 view .LVU316
 1114 0084 0122     		movs	r2, #1
 1115 0086 DA60     		str	r2, [r3, #12]
 262:src-gen/Main/core/lf_token.c ****         }
 1116              		.loc 1 262 13 is_stmt 1 view .LVU317
 1117 0088 E4E7     		b	.L87
 1118              	.L102:
 1119 008a 00BF     		.align	2
 1120              	.L101:
 1121 008c 00000000 		.word	_lf_token_templates
 1122 0090 00000000 		.word	.LC8
 1123 0094 00000000 		.word	__func__.3
 1124 0098 10000000 		.word	.LC5
 1125 009c 00000000 		.word	.LC0
 1126 00a0 9C000000 		.word	.LC3
 1127              		.cfi_endproc
 1128              	.LFE136:
 1130              		.section	.text._lf_free_all_tokens,"ax",%progbits
 1131              		.align	1
 1132              		.global	_lf_free_all_tokens
 1133              		.syntax unified
 1134              		.thumb
 1135              		.thumb_func
 1137              	_lf_free_all_tokens:
 1138              	.LFB139:
 292:src-gen/Main/core/lf_token.c ****     // Free template tokens.
 1139              		.loc 1 292 28 view -0
 1140              		.cfi_startproc
 1141              		@ args = 0, pretend = 0, frame = 0
 1142              		@ frame_needed = 0, uses_anonymous_args = 0
 1143 0000 38B5     		push	{r3, r4, r5, lr}
 1144              	.LCFI13:
 1145              		.cfi_def_cfa_offset 16
 1146              		.cfi_offset 3, -16
 1147              		.cfi_offset 4, -12
 1148              		.cfi_offset 5, -8
 1149              		.cfi_offset 14, -4
 294:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 1150              		.loc 1 294 5 view .LVU319
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 32


 294:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 1151              		.loc 1 294 9 is_stmt 0 view .LVU320
 1152 0002 0020     		movs	r0, #0
 1153 0004 FFF7FEFF 		bl	lf_critical_section_enter
 1154              	.LVL114:
 294:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not enter critical section");
 1155              		.loc 1 294 8 view .LVU321
 1156 0008 30B9     		cbnz	r0, .L113
 1157              	.L104:
 299:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_templates);
 1158              		.loc 1 299 5 is_stmt 1 view .LVU322
 299:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_templates);
 1159              		.loc 1 299 29 is_stmt 0 view .LVU323
 1160 000a 224B     		ldr	r3, .L115
 1161 000c 1868     		ldr	r0, [r3]
 299:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_templates);
 1162              		.loc 1 299 8 view .LVU324
 1163 000e F0B1     		cbz	r0, .L105
 1164              	.LBB6:
 300:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 1165              		.loc 1 300 9 is_stmt 1 view .LVU325
 300:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 1166              		.loc 1 300 34 is_stmt 0 view .LVU326
 1167 0010 FFF7FEFF 		bl	hashset_iterator
 1168              	.LVL115:
 1169 0014 0546     		mov	r5, r0
 1170              	.LVL116:
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1171              		.loc 1 301 9 is_stmt 1 view .LVU327
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1172              		.loc 1 301 15 is_stmt 0 view .LVU328
 1173 0016 0CE0     		b	.L106
 1174              	.LVL117:
 1175              	.L113:
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1176              		.loc 1 301 15 view .LVU329
 1177              	.LBE6:
 295:src-gen/Main/core/lf_token.c ****     }
 1178              		.loc 1 295 9 is_stmt 1 view .LVU330
 1179 0018 1F48     		ldr	r0, .L115+4
 1180 001a FFF7FEFF 		bl	lf_print_error_and_exit
 1181              	.LVL118:
 1182 001e F4E7     		b	.L104
 1183              	.LVL119:
 1184              	.L107:
 1185              	.LBB8:
 1186              	.LBB7:
 302:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 1187              		.loc 1 302 13 view .LVU331
 302:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 1188              		.loc 1 302 58 is_stmt 0 view .LVU332
 1189 0020 2846     		mov	r0, r5
 1190 0022 FFF7FEFF 		bl	hashset_iterator_value
 1191              	.LVL120:
 1192 0026 0446     		mov	r4, r0
 1193              	.LVL121:
 303:src-gen/Main/core/lf_token.c ****             tmplt->token = NULL;
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 33


 1194              		.loc 1 303 13 is_stmt 1 view .LVU333
 1195 0028 C068     		ldr	r0, [r0, #12]
 1196              	.LVL122:
 303:src-gen/Main/core/lf_token.c ****             tmplt->token = NULL;
 1197              		.loc 1 303 13 is_stmt 0 view .LVU334
 1198 002a FFF7FEFF 		bl	_lf_done_using
 1199              	.LVL123:
 304:src-gen/Main/core/lf_token.c ****         }
 1200              		.loc 1 304 13 is_stmt 1 view .LVU335
 304:src-gen/Main/core/lf_token.c ****         }
 1201              		.loc 1 304 26 is_stmt 0 view .LVU336
 1202 002e 0023     		movs	r3, #0
 1203 0030 E360     		str	r3, [r4, #12]
 1204              	.LVL124:
 1205              	.L106:
 304:src-gen/Main/core/lf_token.c ****         }
 1206              		.loc 1 304 26 view .LVU337
 1207              	.LBE7:
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1208              		.loc 1 301 48 is_stmt 1 view .LVU338
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1209              		.loc 1 301 16 is_stmt 0 view .LVU339
 1210 0032 2846     		mov	r0, r5
 1211 0034 FFF7FEFF 		bl	hashset_iterator_next
 1212              	.LVL125:
 301:src-gen/Main/core/lf_token.c ****             token_template_t* tmplt = (token_template_t*)hashset_iterator_value(iterator);
 1213              		.loc 1 301 48 view .LVU340
 1214 0038 0028     		cmp	r0, #0
 1215 003a F1DA     		bge	.L107
 306:src-gen/Main/core/lf_token.c ****         hashset_destroy(_lf_token_templates);
 1216              		.loc 1 306 9 is_stmt 1 view .LVU341
 1217 003c 2846     		mov	r0, r5
 1218 003e FFF7FEFF 		bl	free
 1219              	.LVL126:
 307:src-gen/Main/core/lf_token.c ****         _lf_token_templates = NULL;
 1220              		.loc 1 307 9 view .LVU342
 1221 0042 144C     		ldr	r4, .L115
 1222 0044 2068     		ldr	r0, [r4]
 1223 0046 FFF7FEFF 		bl	hashset_destroy
 1224              	.LVL127:
 308:src-gen/Main/core/lf_token.c ****     }
 1225              		.loc 1 308 9 view .LVU343
 308:src-gen/Main/core/lf_token.c ****     }
 1226              		.loc 1 308 29 is_stmt 0 view .LVU344
 1227 004a 0023     		movs	r3, #0
 1228 004c 2360     		str	r3, [r4]
 1229              	.LVL128:
 1230              	.L105:
 308:src-gen/Main/core/lf_token.c ****     }
 1231              		.loc 1 308 29 view .LVU345
 1232              	.LBE8:
 310:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_recycling_bin);
 1233              		.loc 1 310 5 is_stmt 1 view .LVU346
 310:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_recycling_bin);
 1234              		.loc 1 310 33 is_stmt 0 view .LVU347
 1235 004e 134B     		ldr	r3, .L115+8
 1236 0050 1868     		ldr	r0, [r3]
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 34


 310:src-gen/Main/core/lf_token.c ****         hashset_itr_t iterator = hashset_iterator(_lf_token_recycling_bin);
 1237              		.loc 1 310 8 view .LVU348
 1238 0052 B0B1     		cbz	r0, .L108
 1239              	.LBB9:
 311:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 1240              		.loc 1 311 9 is_stmt 1 view .LVU349
 311:src-gen/Main/core/lf_token.c ****         while (hashset_iterator_next(iterator) >= 0) {
 1241              		.loc 1 311 34 is_stmt 0 view .LVU350
 1242 0054 FFF7FEFF 		bl	hashset_iterator
 1243              	.LVL129:
 1244 0058 0446     		mov	r4, r0
 1245              	.LVL130:
 312:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 1246              		.loc 1 312 9 is_stmt 1 view .LVU351
 312:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 1247              		.loc 1 312 15 is_stmt 0 view .LVU352
 1248 005a 04E0     		b	.L109
 1249              	.LVL131:
 1250              	.L110:
 1251              	.LBB10:
 313:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("Freeing token from _lf_token_recycling_bin: %p", token);
 1252              		.loc 1 313 13 is_stmt 1 view .LVU353
 313:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("Freeing token from _lf_token_recycling_bin: %p", token);
 1253              		.loc 1 313 27 is_stmt 0 view .LVU354
 1254 005c 2046     		mov	r0, r4
 1255 005e FFF7FEFF 		bl	hashset_iterator_value
 1256              	.LVL132:
 314:src-gen/Main/core/lf_token.c ****             // Payload should already be freed, so we just free the token:
 1257              		.loc 1 314 13 is_stmt 1 view .LVU355
 314:src-gen/Main/core/lf_token.c ****             // Payload should already be freed, so we just free the token:
 1258              		.loc 1 314 13 view .LVU356
 314:src-gen/Main/core/lf_token.c ****             // Payload should already be freed, so we just free the token:
 1259              		.loc 1 314 13 view .LVU357
 316:src-gen/Main/core/lf_token.c ****         }
 1260              		.loc 1 316 13 view .LVU358
 1261 0062 FFF7FEFF 		bl	free
 1262              	.LVL133:
 1263              	.L109:
 316:src-gen/Main/core/lf_token.c ****         }
 1264              		.loc 1 316 13 is_stmt 0 view .LVU359
 1265              	.LBE10:
 312:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 1266              		.loc 1 312 48 is_stmt 1 view .LVU360
 312:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 1267              		.loc 1 312 16 is_stmt 0 view .LVU361
 1268 0066 2046     		mov	r0, r4
 1269 0068 FFF7FEFF 		bl	hashset_iterator_next
 1270              	.LVL134:
 312:src-gen/Main/core/lf_token.c ****             void* token = hashset_iterator_value(iterator);
 1271              		.loc 1 312 48 view .LVU362
 1272 006c 0028     		cmp	r0, #0
 1273 006e F5DA     		bge	.L110
 318:src-gen/Main/core/lf_token.c ****         hashset_destroy(_lf_token_recycling_bin);
 1274              		.loc 1 318 9 is_stmt 1 view .LVU363
 1275 0070 2046     		mov	r0, r4
 1276 0072 FFF7FEFF 		bl	free
 1277              	.LVL135:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 35


 319:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = NULL;
 1278              		.loc 1 319 9 view .LVU364
 1279 0076 094C     		ldr	r4, .L115+8
 1280              	.LVL136:
 319:src-gen/Main/core/lf_token.c ****         _lf_token_recycling_bin = NULL;
 1281              		.loc 1 319 9 is_stmt 0 view .LVU365
 1282 0078 2068     		ldr	r0, [r4]
 1283 007a FFF7FEFF 		bl	hashset_destroy
 1284              	.LVL137:
 320:src-gen/Main/core/lf_token.c ****     }
 1285              		.loc 1 320 9 is_stmt 1 view .LVU366
 320:src-gen/Main/core/lf_token.c ****     }
 1286              		.loc 1 320 33 is_stmt 0 view .LVU367
 1287 007e 0023     		movs	r3, #0
 1288 0080 2360     		str	r3, [r4]
 1289              	.LVL138:
 1290              	.L108:
 320:src-gen/Main/core/lf_token.c ****     }
 1291              		.loc 1 320 33 view .LVU368
 1292              	.LBE9:
 322:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1293              		.loc 1 322 5 is_stmt 1 view .LVU369
 322:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1294              		.loc 1 322 8 is_stmt 0 view .LVU370
 1295 0082 0020     		movs	r0, #0
 1296 0084 FFF7FEFF 		bl	lf_critical_section_exit
 1297              	.LVL139:
 322:src-gen/Main/core/lf_token.c ****         lf_print_error_and_exit("Could not leave critical section");
 1298              		.loc 1 322 7 view .LVU371
 1299 0088 00B9     		cbnz	r0, .L114
 1300              	.L103:
 325:src-gen/Main/core/lf_token.c **** 
 1301              		.loc 1 325 1 view .LVU372
 1302 008a 38BD     		pop	{r3, r4, r5, pc}
 1303              	.L114:
 323:src-gen/Main/core/lf_token.c ****     }
 1304              		.loc 1 323 9 is_stmt 1 view .LVU373
 1305 008c 0448     		ldr	r0, .L115+12
 1306 008e FFF7FEFF 		bl	lf_print_error_and_exit
 1307              	.LVL140:
 325:src-gen/Main/core/lf_token.c **** 
 1308              		.loc 1 325 1 is_stmt 0 view .LVU374
 1309 0092 FAE7     		b	.L103
 1310              	.L116:
 1311              		.align	2
 1312              	.L115:
 1313 0094 00000000 		.word	_lf_token_templates
 1314 0098 00000000 		.word	.LC0
 1315 009c 00000000 		.word	_lf_token_recycling_bin
 1316 00a0 9C000000 		.word	.LC3
 1317              		.cfi_endproc
 1318              	.LFE139:
 1320              		.section	.text._lf_replace_template_token,"ax",%progbits
 1321              		.align	1
 1322              		.global	_lf_replace_template_token
 1323              		.syntax unified
 1324              		.thumb
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 36


 1325              		.thumb_func
 1327              	_lf_replace_template_token:
 1328              	.LVL141:
 1329              	.LFB140:
 327:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 1330              		.loc 1 327 80 is_stmt 1 view -0
 1331              		.cfi_startproc
 1332              		@ args = 0, pretend = 0, frame = 0
 1333              		@ frame_needed = 0, uses_anonymous_args = 0
 327:src-gen/Main/core/lf_token.c ****     assert(tmplt != NULL);
 1334              		.loc 1 327 80 is_stmt 0 view .LVU376
 1335 0000 38B5     		push	{r3, r4, r5, lr}
 1336              	.LCFI14:
 1337              		.cfi_def_cfa_offset 16
 1338              		.cfi_offset 3, -16
 1339              		.cfi_offset 4, -12
 1340              		.cfi_offset 5, -8
 1341              		.cfi_offset 14, -4
 328:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_replace_template_token: template: %p newtoken: %p.", tmplt, newtoken);
 1342              		.loc 1 328 5 is_stmt 1 view .LVU377
 1343 0002 68B1     		cbz	r0, .L123
 1344 0004 0C46     		mov	r4, r1
 1345 0006 0546     		mov	r5, r0
 329:src-gen/Main/core/lf_token.c ****     if (tmplt->token != newtoken) {
 1346              		.loc 1 329 5 discriminator 3 view .LVU378
 329:src-gen/Main/core/lf_token.c ****     if (tmplt->token != newtoken) {
 1347              		.loc 1 329 5 discriminator 3 view .LVU379
 329:src-gen/Main/core/lf_token.c ****     if (tmplt->token != newtoken) {
 1348              		.loc 1 329 5 discriminator 3 view .LVU380
 330:src-gen/Main/core/lf_token.c ****         if (tmplt->token != NULL) {
 1349              		.loc 1 330 5 discriminator 3 view .LVU381
 330:src-gen/Main/core/lf_token.c ****         if (tmplt->token != NULL) {
 1350              		.loc 1 330 14 is_stmt 0 discriminator 3 view .LVU382
 1351 0008 C068     		ldr	r0, [r0, #12]
 1352              	.LVL142:
 330:src-gen/Main/core/lf_token.c ****         if (tmplt->token != NULL) {
 1353              		.loc 1 330 8 discriminator 3 view .LVU383
 1354 000a 8842     		cmp	r0, r1
 1355 000c 07D0     		beq	.L117
 331:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 1356              		.loc 1 331 9 is_stmt 1 view .LVU384
 331:src-gen/Main/core/lf_token.c ****             _lf_done_using(tmplt->token);
 1357              		.loc 1 331 12 is_stmt 0 view .LVU385
 1358 000e 08B1     		cbz	r0, .L120
 332:src-gen/Main/core/lf_token.c ****         }
 1359              		.loc 1 332 13 is_stmt 1 view .LVU386
 1360 0010 FFF7FEFF 		bl	_lf_done_using
 1361              	.LVL143:
 1362              	.L120:
 334:src-gen/Main/core/lf_token.c ****             newtoken->ref_count++;
 1363              		.loc 1 334 9 view .LVU387
 334:src-gen/Main/core/lf_token.c ****             newtoken->ref_count++;
 1364              		.loc 1 334 12 is_stmt 0 view .LVU388
 1365 0014 14B1     		cbz	r4, .L121
 335:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_replace_template_token: Incremented ref_count of %p to %zu.",
 1366              		.loc 1 335 13 is_stmt 1 view .LVU389
 335:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_replace_template_token: Incremented ref_count of %p to %zu.",
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 37


 1367              		.loc 1 335 21 is_stmt 0 view .LVU390
 1368 0016 E368     		ldr	r3, [r4, #12]
 335:src-gen/Main/core/lf_token.c ****             LF_PRINT_DEBUG("_lf_replace_template_token: Incremented ref_count of %p to %zu.",
 1369              		.loc 1 335 32 view .LVU391
 1370 0018 0133     		adds	r3, r3, #1
 1371 001a E360     		str	r3, [r4, #12]
 336:src-gen/Main/core/lf_token.c ****                     newtoken, newtoken->ref_count);
 1372              		.loc 1 336 13 is_stmt 1 view .LVU392
 336:src-gen/Main/core/lf_token.c ****                     newtoken, newtoken->ref_count);
 1373              		.loc 1 336 13 view .LVU393
 1374              	.L121:
 336:src-gen/Main/core/lf_token.c ****                     newtoken, newtoken->ref_count);
 1375              		.loc 1 336 13 discriminator 3 view .LVU394
 339:src-gen/Main/core/lf_token.c ****     }
 1376              		.loc 1 339 9 discriminator 3 view .LVU395
 339:src-gen/Main/core/lf_token.c ****     }
 1377              		.loc 1 339 22 is_stmt 0 discriminator 3 view .LVU396
 1378 001c EC60     		str	r4, [r5, #12]
 1379              	.L117:
 341:src-gen/Main/core/lf_token.c **** 
 1380              		.loc 1 341 1 view .LVU397
 1381 001e 38BD     		pop	{r3, r4, r5, pc}
 1382              	.LVL144:
 1383              	.L123:
 328:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_replace_template_token: template: %p newtoken: %p.", tmplt, newtoken);
 1384              		.loc 1 328 5 discriminator 1 view .LVU398
 1385 0020 034B     		ldr	r3, .L124
 1386 0022 044A     		ldr	r2, .L124+4
 1387 0024 4FF4A471 		mov	r1, #328
 1388              	.LVL145:
 328:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_replace_template_token: template: %p newtoken: %p.", tmplt, newtoken);
 1389              		.loc 1 328 5 discriminator 1 view .LVU399
 1390 0028 0348     		ldr	r0, .L124+8
 1391              	.LVL146:
 328:src-gen/Main/core/lf_token.c ****     LF_PRINT_DEBUG("_lf_replace_template_token: template: %p newtoken: %p.", tmplt, newtoken);
 1392              		.loc 1 328 5 discriminator 1 view .LVU400
 1393 002a FFF7FEFF 		bl	__assert_func
 1394              	.LVL147:
 1395              	.L125:
 1396 002e 00BF     		.align	2
 1397              	.L124:
 1398 0030 00000000 		.word	.LC8
 1399 0034 00000000 		.word	__func__.0
 1400 0038 10000000 		.word	.LC5
 1401              		.cfi_endproc
 1402              	.LFE140:
 1404              		.section	.text._lf_free_token_copies,"ax",%progbits
 1405              		.align	1
 1406              		.global	_lf_free_token_copies
 1407              		.syntax unified
 1408              		.thumb
 1409              		.thumb_func
 1411              	_lf_free_token_copies:
 1412              	.LVL148:
 1413              	.LFB142:
 355:src-gen/Main/core/lf_token.c **** 
 356:src-gen/Main/core/lf_token.c **** void _lf_free_token_copies(struct environment_t* env) {
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 38


 1414              		.loc 1 356 55 is_stmt 1 view -0
 1415              		.cfi_startproc
 1416              		@ args = 0, pretend = 0, frame = 0
 1417              		@ frame_needed = 0, uses_anonymous_args = 0
 357:src-gen/Main/core/lf_token.c ****     while (_lf_tokens_allocated_in_reactions != NULL) {
 1418              		.loc 1 357 5 view .LVU402
 1419              		.loc 1 357 46 view .LVU403
 1420 0000 074B     		ldr	r3, .L133
 1421 0002 1868     		ldr	r0, [r3]
 1422              	.LVL149:
 1423              		.loc 1 357 46 is_stmt 0 view .LVU404
 1424 0004 50B1     		cbz	r0, .L132
 356:src-gen/Main/core/lf_token.c ****     while (_lf_tokens_allocated_in_reactions != NULL) {
 1425              		.loc 1 356 55 view .LVU405
 1426 0006 10B5     		push	{r4, lr}
 1427              	.LCFI15:
 1428              		.cfi_def_cfa_offset 8
 1429              		.cfi_offset 4, -8
 1430              		.cfi_offset 14, -4
 1431              	.L128:
 1432              	.LBB11:
 358:src-gen/Main/core/lf_token.c ****         lf_token_t* next = _lf_tokens_allocated_in_reactions->next;
 1433              		.loc 1 358 9 is_stmt 1 view .LVU406
 1434              		.loc 1 358 21 is_stmt 0 view .LVU407
 1435 0008 0469     		ldr	r4, [r0, #16]
 1436              	.LVL150:
 359:src-gen/Main/core/lf_token.c ****         _lf_done_using(_lf_tokens_allocated_in_reactions);
 1437              		.loc 1 359 9 is_stmt 1 view .LVU408
 1438 000a FFF7FEFF 		bl	_lf_done_using
 1439              	.LVL151:
 360:src-gen/Main/core/lf_token.c ****         _lf_tokens_allocated_in_reactions = next;
 1440              		.loc 1 360 9 view .LVU409
 1441              		.loc 1 360 43 is_stmt 0 view .LVU410
 1442 000e 044B     		ldr	r3, .L133
 1443 0010 1C60     		str	r4, [r3]
 1444              	.LBE11:
 357:src-gen/Main/core/lf_token.c ****         lf_token_t* next = _lf_tokens_allocated_in_reactions->next;
 1445              		.loc 1 357 46 is_stmt 1 view .LVU411
 1446 0012 034B     		ldr	r3, .L133
 1447 0014 1868     		ldr	r0, [r3]
 1448 0016 0028     		cmp	r0, #0
 1449 0018 F6D1     		bne	.L128
 361:src-gen/Main/core/lf_token.c ****     }
 362:src-gen/Main/core/lf_token.c **** }
 1450              		.loc 1 362 1 is_stmt 0 view .LVU412
 1451 001a 10BD     		pop	{r4, pc}
 1452              	.LVL152:
 1453              	.L132:
 1454              	.LCFI16:
 1455              		.cfi_def_cfa_offset 0
 1456              		.cfi_restore 4
 1457              		.cfi_restore 14
 1458              		.loc 1 362 1 view .LVU413
 1459 001c 7047     		bx	lr
 1460              	.L134:
 1461 001e 00BF     		.align	2
 1462              	.L133:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 39


 1463 0020 00000000 		.word	_lf_tokens_allocated_in_reactions
 1464              		.cfi_endproc
 1465              	.LFE142:
 1467              		.section	.rodata.__func__.0,"a"
 1468              		.align	2
 1471              	__func__.0:
 1472 0000 5F6C665F 		.ascii	"_lf_replace_template_token\000"
 1472      7265706C 
 1472      6163655F 
 1472      74656D70 
 1472      6C617465 
 1473              		.section	.rodata.__func__.1,"a"
 1474              		.align	2
 1477              	__func__.1:
 1478 0000 5F6C665F 		.ascii	"_lf_initialize_token\000"
 1478      696E6974 
 1478      69616C69 
 1478      7A655F74 
 1478      6F6B656E 
 1479              		.section	.rodata.__func__.2,"a"
 1480              		.align	2
 1483              	__func__.2:
 1484 0000 5F6C665F 		.ascii	"_lf_initialize_token_with_value\000"
 1484      696E6974 
 1484      69616C69 
 1484      7A655F74 
 1484      6F6B656E 
 1485              		.section	.rodata.__func__.3,"a"
 1486              		.align	2
 1489              	__func__.3:
 1490 0000 5F6C665F 		.ascii	"_lf_initialize_template\000"
 1490      696E6974 
 1490      69616C69 
 1490      7A655F74 
 1490      656D706C 
 1491              		.section	.rodata.__func__.4,"a"
 1492              		.align	2
 1495              	__func__.4:
 1496 0000 6C665F77 		.ascii	"lf_writable_copy\000"
 1496      72697461 
 1496      626C655F 
 1496      636F7079 
 1496      00
 1497              		.section	.bss._lf_token_templates,"aw",%nobits
 1498              		.align	2
 1501              	_lf_token_templates:
 1502 0000 00000000 		.space	4
 1503              		.section	.bss._lf_token_recycling_bin,"aw",%nobits
 1504              		.align	2
 1507              	_lf_token_recycling_bin:
 1508 0000 00000000 		.space	4
 1509              		.global	_lf_tokens_allocated_in_reactions
 1510              		.section	.bss._lf_tokens_allocated_in_reactions,"aw",%nobits
 1511              		.align	2
 1514              	_lf_tokens_allocated_in_reactions:
 1515 0000 00000000 		.space	4
 1516              		.global	_lf_count_token_allocations
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 40


 1517              		.section	.bss._lf_count_token_allocations,"aw",%nobits
 1518              		.align	2
 1521              	_lf_count_token_allocations:
 1522 0000 00000000 		.space	4
 1523              		.global	_lf_count_payload_allocations
 1524              		.section	.bss._lf_count_payload_allocations,"aw",%nobits
 1525              		.align	2
 1528              	_lf_count_payload_allocations:
 1529 0000 00000000 		.space	4
 1530              		.text
 1531              	.Letext0:
 1532              		.file 2 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/lib/gcc/arm-none-eabi/12.3.1/includ
 1533              		.file 3 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 1534              		.file 4 "src-gen/Main/include/core/lf_token.h"
 1535              		.file 5 "src-gen/Main/include/core/lf_types.h"
 1536              		.file 6 "src-gen/Main/include/core/utils/pqueue.h"
 1537              		.file 7 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 1538              		.file 8 "src-gen/Main/include/core/tag.h"
 1539              		.file 9 "src-gen/Main/include/core/utils/vector.h"
 1540              		.file 10 "src-gen/Main/include/core/environment.h"
 1541              		.file 11 "src-gen/Main/include/core/utils/hashset/hashset.h"
 1542              		.file 12 "src-gen/Main/include/core/utils/hashset/hashset_itr.h"
 1543              		.file 13 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/stdlib.h"
 1544              		.file 14 "src-gen/Main/include/core/reactor_common.h"
 1545              		.file 15 "src-gen/Main/include/core/utils/util.h"
 1546              		.file 16 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/string.h"
 1547              		.file 17 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/assert.h"
 1548              		.file 18 "src-gen/Main/include/core/modal_models/modes.h"
 1549              		.file 19 "<built-in>"
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 41


DEFINED SYMBOLS
                            *ABS*:00000000 lf_token.c
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:21     .text._lf_free_token_value:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:27     .text._lf_free_token_value:00000000 _lf_free_token_value
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:95     .text._lf_free_token_value:0000002c $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1528   .bss._lf_count_payload_allocations:00000000 _lf_count_payload_allocations
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:100    .rodata._lf_free_token.str1.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:115    .text._lf_free_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:121    .text._lf_free_token:00000000 _lf_free_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:271    .text._lf_free_token:0000008c $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1507   .bss._lf_token_recycling_bin:00000000 _lf_token_recycling_bin
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1521   .bss._lf_count_token_allocations:00000000 _lf_count_token_allocations
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:281    .text._lf_new_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:287    .text._lf_new_token:00000000 _lf_new_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:436    .text._lf_new_token:0000007c $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:443    .text.lf_new_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:449    .text.lf_new_token:00000000 lf_new_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:472    .rodata.lf_writable_copy.str1.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:484    .text.lf_writable_copy:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:490    .text.lf_writable_copy:00000000 lf_writable_copy
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:660    .text.lf_writable_copy:00000080 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1514   .bss._lf_tokens_allocated_in_reactions:00000000 _lf_tokens_allocated_in_reactions
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1495   .rodata.__func__.4:00000000 __func__.4
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:670    .rodata._lf_done_using.str1.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:674    .text._lf_done_using:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:680    .text._lf_done_using:00000000 _lf_done_using
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:742    .text._lf_done_using:00000024 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:747    .text._lf_get_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:753    .text._lf_get_token:00000000 _lf_get_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:818    .rodata._lf_initialize_token_with_value.str1.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:822    .text._lf_initialize_token_with_value:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:828    .text._lf_initialize_token_with_value:00000000 _lf_initialize_token_with_value
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:890    .text._lf_initialize_token_with_value:00000028 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1483   .rodata.__func__.2:00000000 __func__.2
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:898    .text._lf_initialize_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:904    .text._lf_initialize_token:00000000 _lf_initialize_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:962    .text._lf_initialize_token:0000002c $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1477   .rodata.__func__.1:00000000 __func__.1
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:969    .text._lf_initialize_template:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:975    .text._lf_initialize_template:00000000 _lf_initialize_template
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1121   .text._lf_initialize_template:0000008c $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1501   .bss._lf_token_templates:00000000 _lf_token_templates
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1489   .rodata.__func__.3:00000000 __func__.3
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1131   .text._lf_free_all_tokens:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1137   .text._lf_free_all_tokens:00000000 _lf_free_all_tokens
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1313   .text._lf_free_all_tokens:00000094 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1321   .text._lf_replace_template_token:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1327   .text._lf_replace_template_token:00000000 _lf_replace_template_token
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1398   .text._lf_replace_template_token:00000030 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1471   .rodata.__func__.0:00000000 __func__.0
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1405   .text._lf_free_token_copies:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1411   .text._lf_free_token_copies:00000000 _lf_free_token_copies
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1463   .text._lf_free_token_copies:00000020 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1468   .rodata.__func__.0:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1474   .rodata.__func__.1:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1480   .rodata.__func__.2:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1486   .rodata.__func__.3:00000000 $d
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s 			page 42


/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1492   .rodata.__func__.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1498   .bss._lf_token_templates:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1504   .bss._lf_token_recycling_bin:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1511   .bss._lf_tokens_allocated_in_reactions:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1518   .bss._lf_count_token_allocations:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//cciGp5M9.s:1525   .bss._lf_count_payload_allocations:00000000 $d

UNDEFINED SYMBOLS
free
lf_critical_section_enter
hashset_num_items
hashset_add
lf_print_warning
lf_print_error_and_exit
hashset_create
lf_critical_section_exit
hashset_iterator
hashset_iterator_next
hashset_iterator_value
hashset_remove
calloc
__assert_func
malloc
memcpy
hashset_destroy
