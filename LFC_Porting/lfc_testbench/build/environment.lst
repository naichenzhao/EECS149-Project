ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"environment.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "src-gen/Main/core/environment.c"
  20              		.section	.text.environment_init_tags,"ax",%progbits
  21              		.align	1
  22              		.global	environment_init_tags
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	environment_init_tags:
  28              	.LVL0:
  29              	.LFB137:
   1:src-gen/Main/core/environment.c **** /**
   2:src-gen/Main/core/environment.c ****  * @file
   3:src-gen/Main/core/environment.c ****  * @author Erling R. Jellum (erling.r.jellum@ntnu.no)
   4:src-gen/Main/core/environment.c ****  *
   5:src-gen/Main/core/environment.c ****  * @section LICENSE
   6:src-gen/Main/core/environment.c ****  * Copyright (c) 2023, The Norwegian University of Science and Technology.
   7:src-gen/Main/core/environment.c ****  *
   8:src-gen/Main/core/environment.c ****  * Redistribution and use in source and binary forms, with or without modification,
   9:src-gen/Main/core/environment.c ****  * are permitted provided that the following conditions are met:
  10:src-gen/Main/core/environment.c ****  *
  11:src-gen/Main/core/environment.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  12:src-gen/Main/core/environment.c ****  *    this list of conditions and the following disclaimer.
  13:src-gen/Main/core/environment.c ****  *
  14:src-gen/Main/core/environment.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  15:src-gen/Main/core/environment.c ****  *    this list of conditions and the following disclaimer in the documentation
  16:src-gen/Main/core/environment.c ****  *    and/or other materials provided with the distribution.
  17:src-gen/Main/core/environment.c ****  *
  18:src-gen/Main/core/environment.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
  19:src-gen/Main/core/environment.c ****  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  20:src-gen/Main/core/environment.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
  21:src-gen/Main/core/environment.c ****  * THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  22:src-gen/Main/core/environment.c ****  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  23:src-gen/Main/core/environment.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  24:src-gen/Main/core/environment.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  25:src-gen/Main/core/environment.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
  26:src-gen/Main/core/environment.c ****  * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:src-gen/Main/core/environment.c ****  *
  28:src-gen/Main/core/environment.c ****  * @section DESCRIPTION Functions intitializing and freeing memory for environments.
  29:src-gen/Main/core/environment.c ****  *  See environment.h for docs.
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 2


  30:src-gen/Main/core/environment.c ****  */
  31:src-gen/Main/core/environment.c **** 
  32:src-gen/Main/core/environment.c **** #include "environment.h"
  33:src-gen/Main/core/environment.c **** #include "util.h"
  34:src-gen/Main/core/environment.c **** #include "lf_types.h"
  35:src-gen/Main/core/environment.c **** #include <string.h>
  36:src-gen/Main/core/environment.c **** #include "trace.h"
  37:src-gen/Main/core/environment.c **** #ifdef LF_THREADED
  38:src-gen/Main/core/environment.c **** #include "scheduler.h"
  39:src-gen/Main/core/environment.c **** #endif
  40:src-gen/Main/core/environment.c **** 
  41:src-gen/Main/core/environment.c **** /**
  42:src-gen/Main/core/environment.c ****  * @brief Initialize the threaded part of the environment struct.
  43:src-gen/Main/core/environment.c ****  */
  44:src-gen/Main/core/environment.c **** static void environment_init_threaded(environment_t* env, int num_workers) {
  45:src-gen/Main/core/environment.c **** #ifdef LF_THREADED
  46:src-gen/Main/core/environment.c ****     env->num_workers = num_workers;
  47:src-gen/Main/core/environment.c ****     env->thread_ids = (lf_thread_t*)calloc(num_workers, sizeof(lf_thread_t));
  48:src-gen/Main/core/environment.c ****     lf_assert(env->thread_ids != NULL, "Out of memory");
  49:src-gen/Main/core/environment.c ****     env->barrier.requestors = 0;
  50:src-gen/Main/core/environment.c ****     env->barrier.horizon = FOREVER_TAG;
  51:src-gen/Main/core/environment.c ****     
  52:src-gen/Main/core/environment.c ****     // Initialize synchronization objects.
  53:src-gen/Main/core/environment.c ****     if (lf_mutex_init(&env->mutex) != 0) {
  54:src-gen/Main/core/environment.c ****         lf_print_error_and_exit("Could not initialize environment mutex");
  55:src-gen/Main/core/environment.c ****     }
  56:src-gen/Main/core/environment.c ****     if (lf_cond_init(&env->event_q_changed, &env->mutex) != 0) {
  57:src-gen/Main/core/environment.c ****         lf_print_error_and_exit("Could not initialize environment event queue condition variable");
  58:src-gen/Main/core/environment.c ****     }
  59:src-gen/Main/core/environment.c ****     if (lf_cond_init(&env->global_tag_barrier_requestors_reached_zero, &env->mutex)) {
  60:src-gen/Main/core/environment.c ****         lf_print_error_and_exit("Could not initialize environment tag barrier condition variable");
  61:src-gen/Main/core/environment.c ****     }
  62:src-gen/Main/core/environment.c **** 
  63:src-gen/Main/core/environment.c **** 
  64:src-gen/Main/core/environment.c **** #endif
  65:src-gen/Main/core/environment.c **** }
  66:src-gen/Main/core/environment.c **** /**
  67:src-gen/Main/core/environment.c ****  * @brief Initialize the unthreaded-specific parts of the environment struct.
  68:src-gen/Main/core/environment.c ****  */
  69:src-gen/Main/core/environment.c **** static void environment_init_unthreaded(environment_t* env) {
  70:src-gen/Main/core/environment.c **** #ifdef LF_UNTHREADED
  71:src-gen/Main/core/environment.c ****     // Reaction queue ordered first by deadline, then by level.
  72:src-gen/Main/core/environment.c ****     // The index of the reaction holds the deadline in the 48 most significant bits,
  73:src-gen/Main/core/environment.c ****     // the level in the 16 least significant bits.
  74:src-gen/Main/core/environment.c ****     env->reaction_q = pqueue_init(INITIAL_REACT_QUEUE_SIZE, in_reverse_order, get_reaction_index,
  75:src-gen/Main/core/environment.c ****                 get_reaction_position, set_reaction_position, reaction_matches, print_reaction);
  76:src-gen/Main/core/environment.c **** 
  77:src-gen/Main/core/environment.c **** #endif
  78:src-gen/Main/core/environment.c **** }
  79:src-gen/Main/core/environment.c **** 
  80:src-gen/Main/core/environment.c **** /**
  81:src-gen/Main/core/environment.c ****  * @brief Initialize the modal-specific parts of the environment struct.
  82:src-gen/Main/core/environment.c ****  */
  83:src-gen/Main/core/environment.c **** static void environment_init_modes(environment_t* env, int num_modes, int num_state_resets) {
  84:src-gen/Main/core/environment.c **** #ifdef MODAL_REACTORS
  85:src-gen/Main/core/environment.c ****     if (num_modes > 0) {
  86:src-gen/Main/core/environment.c ****         mode_environment_t* modes = (mode_environment_t *) calloc(1, sizeof(mode_environment_t));
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 3


  87:src-gen/Main/core/environment.c ****         lf_assert(modes != NULL, "Out of memory");
  88:src-gen/Main/core/environment.c ****         modes->modal_reactor_states = (reactor_mode_state_t**) calloc(num_modes, sizeof(reactor_mod
  89:src-gen/Main/core/environment.c ****         lf_assert(modes->modal_reactor_states != NULL, "Out of memory");
  90:src-gen/Main/core/environment.c ****         modes->modal_reactor_states_size = num_modes;
  91:src-gen/Main/core/environment.c ****         modes->triggered_reactions_request = 0;
  92:src-gen/Main/core/environment.c **** 
  93:src-gen/Main/core/environment.c ****         modes->state_resets = (mode_state_variable_reset_data_t *) calloc(num_state_resets, sizeof(
  94:src-gen/Main/core/environment.c ****         lf_assert(modes->state_resets != NULL, "Out of memory");
  95:src-gen/Main/core/environment.c ****         modes->state_resets_size = num_state_resets;
  96:src-gen/Main/core/environment.c **** 
  97:src-gen/Main/core/environment.c ****         env->modes = modes;
  98:src-gen/Main/core/environment.c **** 
  99:src-gen/Main/core/environment.c ****     } else {
 100:src-gen/Main/core/environment.c ****         env->modes = NULL;
 101:src-gen/Main/core/environment.c ****     }
 102:src-gen/Main/core/environment.c **** #endif
 103:src-gen/Main/core/environment.c **** }
 104:src-gen/Main/core/environment.c **** 
 105:src-gen/Main/core/environment.c **** /**
 106:src-gen/Main/core/environment.c ****  * @brief Initialize the federation-specific parts of the environment struct.
 107:src-gen/Main/core/environment.c ****  */
 108:src-gen/Main/core/environment.c **** static void environment_init_federated(environment_t* env, int num_is_present_fields) {
 109:src-gen/Main/core/environment.c **** #ifdef FEDERATED_DECENTRALIZED
 110:src-gen/Main/core/environment.c ****     env->_lf_intended_tag_fields = (tag_t**) calloc(num_is_present_fields, sizeof(tag_t*));
 111:src-gen/Main/core/environment.c ****     lf_assert(env->_lf_intended_tag_fields != NULL, "Out of memory");
 112:src-gen/Main/core/environment.c ****     env->_lf_intended_tag_fields_size = num_is_present_fields;
 113:src-gen/Main/core/environment.c **** #endif
 114:src-gen/Main/core/environment.c **** }
 115:src-gen/Main/core/environment.c **** 
 116:src-gen/Main/core/environment.c **** void environment_init_tags( environment_t *env, instant_t start_time, interval_t duration) {
  30              		.loc 1 116 92 view -0
  31              		.cfi_startproc
  32              		@ args = 8, pretend = 0, frame = 16
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 116 92 is_stmt 0 view .LVU1
  35 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 20
  38              		.cfi_offset 4, -20
  39              		.cfi_offset 5, -16
  40              		.cfi_offset 6, -12
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0002 85B0     		sub	sp, sp, #20
  44              	.LCFI1:
  45              		.cfi_def_cfa_offset 40
  46 0004 8446     		mov	ip, r0
  47 0006 1446     		mov	r4, r2
  48 0008 1D46     		mov	r5, r3
  49 000a 0A9F     		ldr	r7, [sp, #40]
  50 000c 0B9E     		ldr	r6, [sp, #44]
 117:src-gen/Main/core/environment.c ****     env->current_tag = (tag_t){.time = start_time, .microstep = 0u};
  51              		.loc 1 117 5 is_stmt 1 view .LVU2
  52              		.loc 1 117 22 is_stmt 0 view .LVU3
  53 000e 8260     		str	r2, [r0, #8]
  54 0010 C360     		str	r3, [r0, #12]
  55 0012 0023     		movs	r3, #0
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 4


  56 0014 0361     		str	r3, [r0, #16]
 118:src-gen/Main/core/environment.c ****     
 119:src-gen/Main/core/environment.c ****     tag_t stop_tag = FOREVER_TAG_INITIALIZER;
  57              		.loc 1 119 5 is_stmt 1 view .LVU4
  58              		.loc 1 119 11 is_stmt 0 view .LVU5
  59 0016 0C4B     		ldr	r3, .L4
  60 0018 0FCB     		ldm	r3, {r0, r1, r2, r3}
  61              	.LVL1:
  62              		.loc 1 119 11 view .LVU6
  63 001a 0DF1100E 		add	lr, sp, #16
  64 001e 0EE90F00 		stmdb	lr, {r0, r1, r2, r3}
 120:src-gen/Main/core/environment.c ****     if (duration >= 0LL) {
  65              		.loc 1 120 5 is_stmt 1 view .LVU7
  66              		.loc 1 120 8 is_stmt 0 view .LVU8
  67 0022 002E     		cmp	r6, #0
  68 0024 06DB     		blt	.L2
 121:src-gen/Main/core/environment.c ****         // A duration has been specified. Calculate the stop time.
 122:src-gen/Main/core/environment.c ****         stop_tag.time = env->current_tag.time + duration;
  69              		.loc 1 122 9 is_stmt 1 view .LVU9
  70              		.loc 1 122 47 is_stmt 0 view .LVU10
  71 0026 E419     		adds	r4, r4, r7
  72 0028 45EB0605 		adc	r5, r5, r6
  73              		.loc 1 122 23 view .LVU11
  74 002c 0094     		str	r4, [sp]
  75 002e 0195     		str	r5, [sp, #4]
 123:src-gen/Main/core/environment.c ****         stop_tag.microstep = 0;
  76              		.loc 1 123 9 is_stmt 1 view .LVU12
  77              		.loc 1 123 28 is_stmt 0 view .LVU13
  78 0030 0023     		movs	r3, #0
  79 0032 0293     		str	r3, [sp, #8]
  80              	.L2:
 124:src-gen/Main/core/environment.c ****     }
 125:src-gen/Main/core/environment.c ****     env->stop_tag = stop_tag;
  81              		.loc 1 125 5 is_stmt 1 view .LVU14
  82              		.loc 1 125 19 is_stmt 0 view .LVU15
  83 0034 0CF1180C 		add	ip, ip, #24
  84              	.LVL2:
  85              		.loc 1 125 19 view .LVU16
  86 0038 04AB     		add	r3, sp, #16
  87 003a 13E90F00 		ldmdb	r3, {r0, r1, r2, r3}
  88 003e 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 126:src-gen/Main/core/environment.c **** }
  89              		.loc 1 126 1 view .LVU17
  90 0042 05B0     		add	sp, sp, #20
  91              	.LCFI2:
  92              		.cfi_def_cfa_offset 20
  93              		@ sp needed
  94 0044 F0BD     		pop	{r4, r5, r6, r7, pc}
  95              	.LVL3:
  96              	.L5:
  97              		.loc 1 126 1 view .LVU18
  98 0046 00BF     		.align	2
  99              	.L4:
 100 0048 00000000 		.word	.LANCHOR0
 101              		.cfi_endproc
 102              	.LFE137:
 104              		.section	.text.environment_free,"ax",%progbits
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 5


 105              		.align	1
 106              		.global	environment_free
 107              		.syntax unified
 108              		.thumb
 109              		.thumb_func
 111              	environment_free:
 112              	.LVL4:
 113              	.LFB142:
 127:src-gen/Main/core/environment.c **** 
 128:src-gen/Main/core/environment.c **** static void environment_free_threaded(environment_t* env) {
 129:src-gen/Main/core/environment.c **** #ifdef LF_THREADED
 130:src-gen/Main/core/environment.c ****     free(env->thread_ids);
 131:src-gen/Main/core/environment.c ****     lf_sched_free(env->scheduler);   
 132:src-gen/Main/core/environment.c **** #endif
 133:src-gen/Main/core/environment.c **** }
 134:src-gen/Main/core/environment.c **** 
 135:src-gen/Main/core/environment.c **** static void environment_free_unthreaded(environment_t* env) {
 136:src-gen/Main/core/environment.c **** #ifdef LF_UNTHREADED
 137:src-gen/Main/core/environment.c ****     pqueue_free(env->reaction_q);
 138:src-gen/Main/core/environment.c **** #endif
 139:src-gen/Main/core/environment.c **** }
 140:src-gen/Main/core/environment.c **** 
 141:src-gen/Main/core/environment.c **** static void environment_free_modes(environment_t* env) {
 142:src-gen/Main/core/environment.c **** #ifdef MODAL_REACTORS
 143:src-gen/Main/core/environment.c ****     if (env->modes) {
 144:src-gen/Main/core/environment.c ****         free(env->modes->modal_reactor_states);
 145:src-gen/Main/core/environment.c ****         free(env->modes->state_resets);
 146:src-gen/Main/core/environment.c ****         free(env->modes);
 147:src-gen/Main/core/environment.c ****     }
 148:src-gen/Main/core/environment.c **** #endif
 149:src-gen/Main/core/environment.c **** }
 150:src-gen/Main/core/environment.c **** 
 151:src-gen/Main/core/environment.c **** static void environment_free_federated(environment_t* env) {
 152:src-gen/Main/core/environment.c **** #ifdef FEDERATED_DECENTRALIZED
 153:src-gen/Main/core/environment.c ****     free(env->_lf_intended_tag_fields);
 154:src-gen/Main/core/environment.c **** #endif
 155:src-gen/Main/core/environment.c **** }
 156:src-gen/Main/core/environment.c **** 
 157:src-gen/Main/core/environment.c **** void environment_free(environment_t* env) {
 114              		.loc 1 157 43 is_stmt 1 view -0
 115              		.cfi_startproc
 116              		@ args = 0, pretend = 0, frame = 0
 117              		@ frame_needed = 0, uses_anonymous_args = 0
 118              		.loc 1 157 43 is_stmt 0 view .LVU20
 119 0000 10B5     		push	{r4, lr}
 120              	.LCFI3:
 121              		.cfi_def_cfa_offset 8
 122              		.cfi_offset 4, -8
 123              		.cfi_offset 14, -4
 124 0002 0446     		mov	r4, r0
 158:src-gen/Main/core/environment.c ****     free(env->timer_triggers);
 125              		.loc 1 158 5 is_stmt 1 view .LVU21
 126 0004 C06D     		ldr	r0, [r0, #92]
 127              	.LVL5:
 128              		.loc 1 158 5 is_stmt 0 view .LVU22
 129 0006 FFF7FEFF 		bl	free
 130              	.LVL6:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 6


 159:src-gen/Main/core/environment.c ****     free(env->startup_reactions);
 131              		.loc 1 159 5 is_stmt 1 view .LVU23
 132 000a 606E     		ldr	r0, [r4, #100]
 133 000c FFF7FEFF 		bl	free
 134              	.LVL7:
 160:src-gen/Main/core/environment.c ****     free(env->shutdown_reactions);
 135              		.loc 1 160 5 view .LVU24
 136 0010 E06E     		ldr	r0, [r4, #108]
 137 0012 FFF7FEFF 		bl	free
 138              	.LVL8:
 161:src-gen/Main/core/environment.c ****     free(env->reset_reactions);
 139              		.loc 1 161 5 view .LVU25
 140 0016 606F     		ldr	r0, [r4, #116]
 141 0018 FFF7FEFF 		bl	free
 142              	.LVL9:
 162:src-gen/Main/core/environment.c ****     free(env->is_present_fields);
 143              		.loc 1 162 5 view .LVU26
 144 001c 606B     		ldr	r0, [r4, #52]
 145 001e FFF7FEFF 		bl	free
 146              	.LVL10:
 163:src-gen/Main/core/environment.c ****     free(env->is_present_fields_abbreviated);
 147              		.loc 1 163 5 view .LVU27
 148 0022 E06B     		ldr	r0, [r4, #60]
 149 0024 FFF7FEFF 		bl	free
 150              	.LVL11:
 164:src-gen/Main/core/environment.c ****     pqueue_free(env->event_q);
 151              		.loc 1 164 5 view .LVU28
 152 0028 A06A     		ldr	r0, [r4, #40]
 153 002a FFF7FEFF 		bl	pqueue_free
 154              	.LVL12:
 165:src-gen/Main/core/environment.c ****     pqueue_free(env->recycle_q);
 155              		.loc 1 165 5 view .LVU29
 156 002e E06A     		ldr	r0, [r4, #44]
 157 0030 FFF7FEFF 		bl	pqueue_free
 158              	.LVL13:
 166:src-gen/Main/core/environment.c ****     pqueue_free(env->next_q);
 159              		.loc 1 166 5 view .LVU30
 160 0034 206B     		ldr	r0, [r4, #48]
 161 0036 FFF7FEFF 		bl	pqueue_free
 162              	.LVL14:
 167:src-gen/Main/core/environment.c **** 
 168:src-gen/Main/core/environment.c ****     environment_free_threaded(env);
 163              		.loc 1 168 5 view .LVU31
 169:src-gen/Main/core/environment.c ****     environment_free_unthreaded(env);
 164              		.loc 1 169 5 view .LVU32
 170:src-gen/Main/core/environment.c ****     environment_free_modes(env);
 165              		.loc 1 170 5 view .LVU33
 171:src-gen/Main/core/environment.c ****     environment_free_federated(env);
 166              		.loc 1 171 5 view .LVU34
 172:src-gen/Main/core/environment.c ****     trace_free(env->trace);
 167              		.loc 1 172 27 view .LVU35
 173:src-gen/Main/core/environment.c **** }
 168              		.loc 1 173 1 is_stmt 0 view .LVU36
 169 003a 10BD     		pop	{r4, pc}
 170              		.loc 1 173 1 view .LVU37
 171              		.cfi_endproc
 172              	.LFE142:
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 7


 174              		.section	.rodata.environment_init.str1.4,"aMS",%progbits,1
 175              		.align	2
 176              	.LC1:
 177 0000 4F757420 		.ascii	"Out of memory\000"
 177      6F66206D 
 177      656D6F72 
 177      7900
 178              		.section	.text.environment_init,"ax",%progbits
 179              		.align	1
 180              		.global	environment_init
 181              		.syntax unified
 182              		.thumb
 183              		.thumb_func
 185              	environment_init:
 186              	.LVL15:
 187              	.LFB143:
 174:src-gen/Main/core/environment.c **** 
 175:src-gen/Main/core/environment.c **** 
 176:src-gen/Main/core/environment.c **** int environment_init(
 177:src-gen/Main/core/environment.c ****     environment_t* env,
 178:src-gen/Main/core/environment.c ****     int id,
 179:src-gen/Main/core/environment.c ****     int num_workers,
 180:src-gen/Main/core/environment.c ****     int num_timers, 
 181:src-gen/Main/core/environment.c ****     int num_startup_reactions, 
 182:src-gen/Main/core/environment.c ****     int num_shutdown_reactions, 
 183:src-gen/Main/core/environment.c ****     int num_reset_reactions,
 184:src-gen/Main/core/environment.c ****     int num_is_present_fields,
 185:src-gen/Main/core/environment.c ****     int num_modes,
 186:src-gen/Main/core/environment.c ****     int num_state_resets,
 187:src-gen/Main/core/environment.c ****     const char * trace_file_name
 188:src-gen/Main/core/environment.c **** ) {
 188              		.loc 1 188 3 is_stmt 1 view -0
 189              		.cfi_startproc
 190              		@ args = 28, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192              		.loc 1 188 3 is_stmt 0 view .LVU39
 193 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 194              	.LCFI4:
 195              		.cfi_def_cfa_offset 36
 196              		.cfi_offset 4, -36
 197              		.cfi_offset 5, -32
 198              		.cfi_offset 6, -28
 199              		.cfi_offset 7, -24
 200              		.cfi_offset 8, -20
 201              		.cfi_offset 9, -16
 202              		.cfi_offset 10, -12
 203              		.cfi_offset 11, -8
 204              		.cfi_offset 14, -4
 205 0004 85B0     		sub	sp, sp, #20
 206              	.LCFI5:
 207              		.cfi_def_cfa_offset 56
 208 0006 0446     		mov	r4, r0
 209 0008 1E46     		mov	r6, r3
 210 000a DDF83890 		ldr	r9, [sp, #56]
 211 000e DDF83C80 		ldr	r8, [sp, #60]
 212 0012 109D     		ldr	r5, [sp, #64]
 213 0014 119F     		ldr	r7, [sp, #68]
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 8


 189:src-gen/Main/core/environment.c **** 
 190:src-gen/Main/core/environment.c ****     env->id = id;
 214              		.loc 1 190 5 is_stmt 1 view .LVU40
 215              		.loc 1 190 13 is_stmt 0 view .LVU41
 216 0016 4160     		str	r1, [r0, #4]
 191:src-gen/Main/core/environment.c ****     env->stop_tag = FOREVER_TAG;
 217              		.loc 1 191 5 is_stmt 1 view .LVU42
 218              		.loc 1 191 19 is_stmt 0 view .LVU43
 219 0018 464B     		ldr	r3, .L10
 220              	.LVL16:
 221              		.loc 1 191 19 view .LVU44
 222 001a 00F1180C 		add	ip, r0, #24
 223 001e 0FCB     		ldm	r3, {r0, r1, r2, r3}
 224              	.LVL17:
 225              		.loc 1 191 19 view .LVU45
 226 0020 8CE80F00 		stm	ip, {r0, r1, r2, r3}
 192:src-gen/Main/core/environment.c **** 
 193:src-gen/Main/core/environment.c ****     env->timer_triggers_size=num_timers;
 227              		.loc 1 193 5 is_stmt 1 view .LVU46
 228              		.loc 1 193 29 is_stmt 0 view .LVU47
 229 0024 2666     		str	r6, [r4, #96]
 194:src-gen/Main/core/environment.c ****     env->timer_triggers = (trigger_t **) calloc(num_timers, sizeof(trigger_t));
 230              		.loc 1 194 5 is_stmt 1 view .LVU48
 231              		.loc 1 194 42 is_stmt 0 view .LVU49
 232 0026 4021     		movs	r1, #64
 233 0028 3046     		mov	r0, r6
 234 002a FFF7FEFF 		bl	calloc
 235              	.LVL18:
 236              		.loc 1 194 25 view .LVU50
 237 002e E065     		str	r0, [r4, #92]
 195:src-gen/Main/core/environment.c ****     lf_assert(env->timer_triggers != NULL, "Out of memory");
 238              		.loc 1 195 5 is_stmt 1 view .LVU51
 239 0030 414E     		ldr	r6, .L10+4
 240              	.LVL19:
 241              		.loc 1 195 5 is_stmt 0 view .LVU52
 242 0032 3146     		mov	r1, r6
 243 0034 0038     		subs	r0, r0, #0
 244 0036 18BF     		it	ne
 245 0038 0120     		movne	r0, #1
 246 003a FFF7FEFF 		bl	lf_assert
 247              	.LVL20:
 196:src-gen/Main/core/environment.c **** 
 197:src-gen/Main/core/environment.c ****     env->startup_reactions_size=num_startup_reactions;
 248              		.loc 1 197 5 is_stmt 1 view .LVU53
 249              		.loc 1 197 32 is_stmt 0 view .LVU54
 250 003e C4F86890 		str	r9, [r4, #104]
 198:src-gen/Main/core/environment.c ****     env->startup_reactions = (reaction_t **) calloc(num_startup_reactions, sizeof(reaction_t));
 251              		.loc 1 198 5 is_stmt 1 view .LVU55
 252              		.loc 1 198 46 is_stmt 0 view .LVU56
 253 0042 6821     		movs	r1, #104
 254 0044 4846     		mov	r0, r9
 255 0046 FFF7FEFF 		bl	calloc
 256              	.LVL21:
 257              		.loc 1 198 28 view .LVU57
 258 004a 6066     		str	r0, [r4, #100]
 199:src-gen/Main/core/environment.c ****     lf_assert(env->startup_reactions != NULL, "Out of memory");
 259              		.loc 1 199 5 is_stmt 1 view .LVU58
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 9


 260 004c 3146     		mov	r1, r6
 261 004e 0038     		subs	r0, r0, #0
 262 0050 18BF     		it	ne
 263 0052 0120     		movne	r0, #1
 264 0054 FFF7FEFF 		bl	lf_assert
 265              	.LVL22:
 200:src-gen/Main/core/environment.c **** 
 201:src-gen/Main/core/environment.c ****     env->shutdown_reactions_size=num_shutdown_reactions;
 266              		.loc 1 201 5 view .LVU59
 267              		.loc 1 201 33 is_stmt 0 view .LVU60
 268 0058 C4F87080 		str	r8, [r4, #112]
 202:src-gen/Main/core/environment.c ****     env->shutdown_reactions = (reaction_t **) calloc(num_shutdown_reactions, sizeof(reaction_t));
 269              		.loc 1 202 5 is_stmt 1 view .LVU61
 270              		.loc 1 202 47 is_stmt 0 view .LVU62
 271 005c 6821     		movs	r1, #104
 272 005e 4046     		mov	r0, r8
 273 0060 FFF7FEFF 		bl	calloc
 274              	.LVL23:
 275              		.loc 1 202 29 view .LVU63
 276 0064 E066     		str	r0, [r4, #108]
 203:src-gen/Main/core/environment.c ****     lf_assert(env->shutdown_reactions != NULL, "Out of memory");
 277              		.loc 1 203 5 is_stmt 1 view .LVU64
 278 0066 3146     		mov	r1, r6
 279 0068 0038     		subs	r0, r0, #0
 280 006a 18BF     		it	ne
 281 006c 0120     		movne	r0, #1
 282 006e FFF7FEFF 		bl	lf_assert
 283              	.LVL24:
 204:src-gen/Main/core/environment.c **** 
 205:src-gen/Main/core/environment.c ****     env->reset_reactions_size=num_reset_reactions;
 284              		.loc 1 205 5 view .LVU65
 285              		.loc 1 205 30 is_stmt 0 view .LVU66
 286 0072 A567     		str	r5, [r4, #120]
 206:src-gen/Main/core/environment.c ****     env->reset_reactions = (reaction_t **) calloc(num_reset_reactions, sizeof(reaction_t));
 287              		.loc 1 206 5 is_stmt 1 view .LVU67
 288              		.loc 1 206 44 is_stmt 0 view .LVU68
 289 0074 6821     		movs	r1, #104
 290 0076 2846     		mov	r0, r5
 291 0078 FFF7FEFF 		bl	calloc
 292              	.LVL25:
 293              		.loc 1 206 26 view .LVU69
 294 007c 6067     		str	r0, [r4, #116]
 207:src-gen/Main/core/environment.c ****     lf_assert(env->reset_reactions != NULL, "Out of memory");
 295              		.loc 1 207 5 is_stmt 1 view .LVU70
 296 007e 3146     		mov	r1, r6
 297 0080 0038     		subs	r0, r0, #0
 298 0082 18BF     		it	ne
 299 0084 0120     		movne	r0, #1
 300 0086 FFF7FEFF 		bl	lf_assert
 301              	.LVL26:
 208:src-gen/Main/core/environment.c **** 
 209:src-gen/Main/core/environment.c ****     env->is_present_fields_size = num_is_present_fields;
 302              		.loc 1 209 5 view .LVU71
 303              		.loc 1 209 33 is_stmt 0 view .LVU72
 304 008a A763     		str	r7, [r4, #56]
 210:src-gen/Main/core/environment.c ****     env->is_present_fields_abbreviated_size = 0;
 305              		.loc 1 210 5 is_stmt 1 view .LVU73
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 10


 306              		.loc 1 210 45 is_stmt 0 view .LVU74
 307 008c 0025     		movs	r5, #0
 308 008e 2564     		str	r5, [r4, #64]
 211:src-gen/Main/core/environment.c **** 
 212:src-gen/Main/core/environment.c ****     env->is_present_fields = (bool**)calloc(num_is_present_fields, sizeof(bool*));
 309              		.loc 1 212 5 is_stmt 1 view .LVU75
 310              		.loc 1 212 38 is_stmt 0 view .LVU76
 311 0090 0421     		movs	r1, #4
 312 0092 3846     		mov	r0, r7
 313 0094 FFF7FEFF 		bl	calloc
 314              	.LVL27:
 315              		.loc 1 212 28 view .LVU77
 316 0098 6063     		str	r0, [r4, #52]
 213:src-gen/Main/core/environment.c ****     lf_assert(env->is_present_fields != NULL, "Out of memory");
 317              		.loc 1 213 5 is_stmt 1 view .LVU78
 318 009a 3146     		mov	r1, r6
 319 009c 401B     		subs	r0, r0, r5
 320 009e 18BF     		it	ne
 321 00a0 0120     		movne	r0, #1
 322 00a2 FFF7FEFF 		bl	lf_assert
 323              	.LVL28:
 214:src-gen/Main/core/environment.c **** 
 215:src-gen/Main/core/environment.c ****     env->is_present_fields_abbreviated = (bool**)calloc(num_is_present_fields, sizeof(bool*));
 324              		.loc 1 215 5 view .LVU79
 325              		.loc 1 215 50 is_stmt 0 view .LVU80
 326 00a6 0421     		movs	r1, #4
 327 00a8 3846     		mov	r0, r7
 328 00aa FFF7FEFF 		bl	calloc
 329              	.LVL29:
 330              		.loc 1 215 40 view .LVU81
 331 00ae E063     		str	r0, [r4, #60]
 216:src-gen/Main/core/environment.c ****     lf_assert(env->is_present_fields_abbreviated != NULL, "Out of memory");
 332              		.loc 1 216 5 is_stmt 1 view .LVU82
 333 00b0 3146     		mov	r1, r6
 334 00b2 401B     		subs	r0, r0, r5
 335 00b4 18BF     		it	ne
 336 00b6 0120     		movne	r0, #1
 337 00b8 FFF7FEFF 		bl	lf_assert
 338              	.LVL30:
 217:src-gen/Main/core/environment.c **** 
 218:src-gen/Main/core/environment.c ****     env->_lf_handle=1;
 339              		.loc 1 218 5 view .LVU83
 340              		.loc 1 218 20 is_stmt 0 view .LVU84
 341 00bc 4FF0010B 		mov	fp, #1
 342 00c0 C4F858B0 		str	fp, [r4, #88]
 219:src-gen/Main/core/environment.c ****     
 220:src-gen/Main/core/environment.c ****     // Initialize our priority queues.
 221:src-gen/Main/core/environment.c ****     env->event_q = pqueue_init(10, in_reverse_order, get_event_time,
 343              		.loc 1 221 5 is_stmt 1 view .LVU85
 344              		.loc 1 221 20 is_stmt 0 view .LVU86
 345 00c4 1D4F     		ldr	r7, .L10+8
 346 00c6 1E4E     		ldr	r6, .L10+12
 347 00c8 DFF880A0 		ldr	r10, .L10+24
 348 00cc CDF808A0 		str	r10, [sp, #8]
 349 00d0 DFF87C90 		ldr	r9, .L10+28
 350 00d4 CDF80490 		str	r9, [sp, #4]
 351 00d8 DFF87880 		ldr	r8, .L10+32
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 11


 352 00dc CDF80080 		str	r8, [sp]
 353 00e0 3B46     		mov	r3, r7
 354 00e2 3246     		mov	r2, r6
 355 00e4 1749     		ldr	r1, .L10+16
 356 00e6 0A20     		movs	r0, #10
 357 00e8 FFF7FEFF 		bl	pqueue_init
 358              	.LVL31:
 359              		.loc 1 221 18 view .LVU87
 360 00ec A062     		str	r0, [r4, #40]
 222:src-gen/Main/core/environment.c ****             get_event_position, set_event_position, event_matches, print_event);
 223:src-gen/Main/core/environment.c ****     env->recycle_q = pqueue_init(10, in_no_particular_order, get_event_time,
 361              		.loc 1 223 5 is_stmt 1 view .LVU88
 362              		.loc 1 223 22 is_stmt 0 view .LVU89
 363 00ee CDF808A0 		str	r10, [sp, #8]
 364 00f2 CDF80490 		str	r9, [sp, #4]
 365 00f6 CDF80080 		str	r8, [sp]
 366 00fa 3B46     		mov	r3, r7
 367 00fc 3246     		mov	r2, r6
 368 00fe 1249     		ldr	r1, .L10+20
 369 0100 0A20     		movs	r0, #10
 370 0102 FFF7FEFF 		bl	pqueue_init
 371              	.LVL32:
 372              		.loc 1 223 20 view .LVU90
 373 0106 E062     		str	r0, [r4, #44]
 224:src-gen/Main/core/environment.c ****             get_event_position, set_event_position, event_matches, print_event);
 225:src-gen/Main/core/environment.c ****     env->next_q = pqueue_init(10, in_no_particular_order, get_event_time,
 374              		.loc 1 225 5 is_stmt 1 view .LVU91
 375              		.loc 1 225 19 is_stmt 0 view .LVU92
 376 0108 CDF808A0 		str	r10, [sp, #8]
 377 010c CDF80490 		str	r9, [sp, #4]
 378 0110 CDF80080 		str	r8, [sp]
 379 0114 3B46     		mov	r3, r7
 380 0116 3246     		mov	r2, r6
 381 0118 0B49     		ldr	r1, .L10+20
 382 011a 0A20     		movs	r0, #10
 383 011c FFF7FEFF 		bl	pqueue_init
 384              	.LVL33:
 385              		.loc 1 225 17 view .LVU93
 386 0120 2063     		str	r0, [r4, #48]
 226:src-gen/Main/core/environment.c ****             get_event_position, set_event_position, event_matches, print_event);
 227:src-gen/Main/core/environment.c **** 
 228:src-gen/Main/core/environment.c ****     // If tracing is enabled. Initialize a tracing struct on the env struct.
 229:src-gen/Main/core/environment.c ****     env->trace = trace_new(env, trace_file_name);
 387              		.loc 1 229 5 is_stmt 1 view .LVU94
 388              		.loc 1 229 16 is_stmt 0 view .LVU95
 389 0122 C4F88050 		str	r5, [r4, #128]
 230:src-gen/Main/core/environment.c **** 
 231:src-gen/Main/core/environment.c ****     // Initialize functionality depending on target properties.
 232:src-gen/Main/core/environment.c ****     environment_init_threaded(env, num_workers);
 390              		.loc 1 232 5 is_stmt 1 view .LVU96
 233:src-gen/Main/core/environment.c ****     environment_init_unthreaded(env);
 391              		.loc 1 233 5 view .LVU97
 234:src-gen/Main/core/environment.c ****     environment_init_modes(env, num_modes, num_state_resets);
 392              		.loc 1 234 5 view .LVU98
 235:src-gen/Main/core/environment.c ****     environment_init_federated(env, num_is_present_fields);
 393              		.loc 1 235 5 view .LVU99
 236:src-gen/Main/core/environment.c **** 
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 12


 237:src-gen/Main/core/environment.c ****     env->initialized = true;
 394              		.loc 1 237 5 view .LVU100
 395              		.loc 1 237 22 is_stmt 0 view .LVU101
 396 0126 84F800B0 		strb	fp, [r4]
 238:src-gen/Main/core/environment.c ****     return 0;
 397              		.loc 1 238 5 is_stmt 1 view .LVU102
 239:src-gen/Main/core/environment.c **** }
 398              		.loc 1 239 1 is_stmt 0 view .LVU103
 399 012a 2846     		mov	r0, r5
 400 012c 05B0     		add	sp, sp, #20
 401              	.LCFI6:
 402              		.cfi_def_cfa_offset 36
 403              		@ sp needed
 404 012e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 405              	.LVL34:
 406              	.L11:
 407              		.loc 1 239 1 view .LVU104
 408 0132 00BF     		.align	2
 409              	.L10:
 410 0134 00000000 		.word	.LANCHOR0
 411 0138 00000000 		.word	.LC1
 412 013c 00000000 		.word	get_event_position
 413 0140 00000000 		.word	get_event_time
 414 0144 00000000 		.word	in_reverse_order
 415 0148 00000000 		.word	in_no_particular_order
 416 014c 00000000 		.word	print_event
 417 0150 00000000 		.word	event_matches
 418 0154 00000000 		.word	set_event_position
 419              		.cfi_endproc
 420              	.LFE143:
 422              		.section	.rodata
 423              		.align	3
 424              		.set	.LANCHOR0,. + 0
 425              	.LC0:
 426 0000 FFFFFFFF 		.word	-1
 427 0004 FFFFFF7F 		.word	2147483647
 428 0008 FFFFFFFF 		.word	-1
 429 000c 00000000 		.space	4
 430              		.text
 431              	.Letext0:
 432              		.file 2 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/lib/gcc/arm-none-eabi/12.3.1/includ
 433              		.file 3 "src-gen/Main/include/core/utils/pqueue.h"
 434              		.file 4 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 435              		.file 5 "src-gen/Main/include/core/lf_token.h"
 436              		.file 6 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 437              		.file 7 "src-gen/Main/include/core/tag.h"
 438              		.file 8 "src-gen/Main/include/core/utils/vector.h"
 439              		.file 9 "src-gen/Main/include/core/lf_types.h"
 440              		.file 10 "src-gen/Main/include/core/environment.h"
 441              		.file 11 "src-gen/Main/include/core/utils/util.h"
 442              		.file 12 "/Applications/ArmGNUToolchain/12.3.rel1/arm-none-eabi/arm-none-eabi/include/stdlib.h"
 443              		.file 13 "src-gen/Main/include/core/modal_models/modes.h"
ARM GAS  /var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s 			page 13


DEFINED SYMBOLS
                            *ABS*:00000000 environment.c
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:21     .text.environment_init_tags:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:27     .text.environment_init_tags:00000000 environment_init_tags
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:100    .text.environment_init_tags:00000048 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:105    .text.environment_free:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:111    .text.environment_free:00000000 environment_free
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:175    .rodata.environment_init.str1.4:00000000 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:179    .text.environment_init:00000000 $t
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:185    .text.environment_init:00000000 environment_init
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:410    .text.environment_init:00000134 $d
/var/folders/2h/lww79zv53b510qlyvytqnvq40000gn/T//ccbMYFNi.s:423    .rodata:00000000 $d

UNDEFINED SYMBOLS
free
pqueue_free
calloc
lf_assert
pqueue_init
get_event_position
get_event_time
in_reverse_order
in_no_particular_order
print_event
event_matches
set_event_position
